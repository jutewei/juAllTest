(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{C047:function(t,e,n){"use strict";e.__esModule=!0;var o,c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("mrSG")),i=n("YKMj"),r=(o=n("lqyy"))&&o.__esModule?o:{default:o},a=n("lzrX"),s=n("AFph"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fileReason=!1,e.checkingIdx=1,e.checkError=[],e.checkNum=1,e.isBack=!1,e}return c.__extends(e,t),e.prototype.beforeRouteLeave=function(t,e,n){this.isBack=!0,n()},e.prototype.created=function(){this.isBack=!1,this.check()},e.prototype.backToAccount=function(){history.go(-3),this.$router.replace(a.ROUTE_ACCOUNT)},e.prototype.check=function(){var t=this;this.$api.logoff.checkCondition().then(function(){t.checkConditionResult()}).catch(this.checkConditionErrorHandler)},e.prototype.checkConditionErrorHandler=function(t){var e=this;if(t.failure){var n=t.data.meta,o=n.msg,c=n.code;return 40722!==c&&40723!==c||this.showWalletBalanceConfirm(o,c),this.$toast.hide(),this.checkError.push(o),this.fileReason=!0,!1}t.offline?this.$toast.show(this.$tr.text.networkDisconnected):this.$toast.show("string"==typeof t?t:this.$tr.text.submitError),setTimeout(function(){e.$router.replace(a.ROUTE_CANCELLATION_EXPLAIN)},2e3)},e.prototype.checkConditionSuccessNext=function(){this.setTempData({cancellationChecked:!0,cancellationQuestionsSelected:{avatar:[],screen_name:[],login_history:[]}}),this.$router.replace(a.ROUTE_CANCELLATION_QUESTIONS)},e.prototype.showWalletBalanceConfirm=function(t,e){var n=this;this.$dialog.confirm({content:t,buttons:[{text:this.tr("button.cancel"),type:"primary",click:function(){history.go(-3),n.$router.replace(a.ROUTE_ACCOUNT)}},{text:this.$tr.text.continue,closed:function(){40722===e?n.showWalletBalanceSecondConfirm():n.checkConditionSuccessNext()}}]})},e.prototype.showWalletBalanceSecondConfirm=function(){var t=this;this.$dialog.confirm({content:this.tr("walletBalanceConfirm2"),buttons:[{text:this.tr("button.cancel"),type:"primary",click:function(){history.go(-3),t.$router.replace(a.ROUTE_ACCOUNT)}},{text:this.$tr.text.continue,click:function(){t.checkConditionSuccessNext()}}]})},e.prototype.checkConditionResult=function(){var t=this;if(this.isBack)return!1;var e={safetyVerifyErrorAlertEnter:function(){t.setSafetyActionCode(s.SAFETY_OP_TYPE_ACCOUNT_CANCELLATION)},safetyVerifyErrorAlertIgnore:function(){t.$router.replace(a.ROUTE_CANCELLATION)},safetyVerifyErrorAlertIgnoreButtonText:this.$tr.text.cancel};this.$api.logoff.getCheckConditionResult({},e).then(function(e){e.data.response.cur_step>0?(t.checkingIdx=e.data.response.cur_step,t.checkNum>=10?t.checkConditionErrorHandler(t.tr("tips.captchaVerifyFailed","register")):(t.checkNum++,t.checkTimer=setTimeout(t.checkConditionResult,500))):t.checkConditionSuccessNext()}).catch(this.checkConditionErrorHandler)},c.__decorate([(0,i.Component)({data:function(){return{$trPage:"cancellationCheck"}},components:{}})],e)}((0,i.Mixins)(r.default));e.default=l},IVn3:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page",{staticClass:"page-cancellation page-cancellation-check"},[n("title-bar"),t._v(" "),n("page-view",{attrs:{padding:""}},[n("page-title",{attrs:{title:t.tr("button.verification","cancellationExplain")}}),t._v(" "),t.fileReason?n("div",{staticClass:"cancellation-main"},[n("p",{staticClass:"check-tips",domProps:{textContent:t._s(t.tr("checkFail"))}},[t._v("~")]),t._v(" "),n("h3",{staticClass:"check-list-title",domProps:{textContent:t._s(t.tr("checkFailReasons"))}}),t._v(" "),n("ul",{staticClass:"check-tips primary-tips"},t._l(t.checkError,function(e,o){return n("li",{key:o},[t._v(t._s(e))])}))]):n("div",{staticClass:"cancellation-main"},[n("icon",{attrs:{name:"loading",bg:"#fff"}}),t._v(" "),n("p",{staticClass:"check-tips",domProps:{textContent:t._s(t.tr("checkingCondition"))}},[t._v("~")]),t._v(" "),n("p",{staticClass:"check-tips primary-tips",domProps:{textContent:t._s(t.tr("condition"+t.checkingIdx))}})],1),t._v(" "),t.fileReason?n("div",{staticClass:"cancellation-footer"},[n("mt-button",{attrs:{type:"primary"},domProps:{textContent:t._s(t.tr("button.gotoAccount","safety"))},on:{click:t.backToAccount}})],1):t._e()],1)],1)},c=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return c})},J4tm:function(t,e){},hYt0:function(t,e,n){"use strict";var o=n("J4tm");n.n(o).a},rT7m:function(t,e,n){"use strict";n.r(e);var o=n("IVn3"),c=n("ujcc");for(var i in c)"default"!==i&&function(t){n.d(e,t,function(){return c[t]})}(i);n("hYt0");var r=n("KHd+"),a=Object(r.a)(c.default,o.a,o.b,!1,null,null,null);a.options.__file="check.vue",e.default=a.exports},ujcc:function(t,e,n){"use strict";n.r(e);var o=n("C047"),c=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e.default=c.a}}]);