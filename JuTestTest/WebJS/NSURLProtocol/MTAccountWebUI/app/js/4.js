(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+CIO":function(t,e,i){"use strict";var a;e.__esModule=!0;var n=/^1\d{10}$/;a=n,e.default={username:/^[a-zA-Z]\w{4,15}$/,password:/^[a-zA-Z][a-zA-Z0-9\.\-\_]{5,15}$/,enName:/^[a-zA-Z]{2,}$/,uppercase:/^[A-Z]+$/,lowercase:/^[a-z]+$/,chinese:/^[\u4e00-\u9fa5]+$/,chineseName:/^[\u4e00-\u9fa5·]+$/,emoji:/\ud83c[\udf00-\udfff]|\ud83d[\udc00-\ude4f]|\ud83d[\ude80-\udeff]/g,email:/^[0-9a-z][_.0-9a-z-]{0,31}@([0-9a-z][0-9a-z-]{0,30}[0-9a-z]\.){1,3}[a-z]{2,4}$/,tel:/^\d{3}-\d{8}|\d{4}-\d{7,8}$/,telExt:/^\d{3}-\d{8}|\d{4}-\d{7,8}-?\d+?$/,mobile:a,mobileI18n:/^\d{6,18}$/,zipCode:/^[1-9]\d{5}$/,qq:/^[1-9]\\d{4,10}$/,domain:/^([a-zA-Z0-9\-]+)\.([a-zA-Z0-9\-]+)\.(com|net|cn|jp|tw|hk|edu|biz|gov|org|info|asia|mobi|co|cc|tt|me|tv|name|de)\.?(cn|hk|tw|jp)?$/,url:/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?$/,ipv4:/^((?:(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d))))$/,idCard:/^\d{17}([0-9]|X)$/,idCard1518:/(^\d{15}$)|(^\d{17}([0-9]|X)$)/,phone:n,passport:/^[a-zA-Z0-9]{5,17}$/,passportName:/^[\s\u4e00-\u9fa5A-Za-z·]+$/,integer:/^\d+$/,verifyCode:/^\d{6}$/,number:function(t){return!isNaN(t)},image:function(t,e){return e.indexOf(t)>=0},notAllowPasswordChars:/^[A-Za-z0-9!@#\$%\^&\*\~\/{}|\(\)\'\\"\?\>\<,\.`+\-=_\[\]:;*\/]+$/g}},"0Ivh":function(t,e,i){"use strict";e.__esModule=!0;var a=d(i("4d7F")),n=d(i("b0Xh")),r=d(i("MgzW")),o=d(i("FIxc")),s=d(i("0iME"));function d(t){return t&&t.__esModule?t:{default:t}}i("5HtE"),window.EXIF=n.default;var p={http:{},rotate:0,crop:!1,quality:91,timeout:5e4,imageWidth:360,imageTypes:["jpg","jpeg","png"],dataType:"json",fetchTokenUrl:s.default.uploadToken,uploadToken:{token:"",key:"",upload_host:""},uploadTokenBackup:{}},u=function(){function t(t){void 0===t&&(t={}),this.options=p,this.defaultOptions=p,this.options=(0,r.default)({},this.defaultOptions,t);var e=t.http;return this.http=e,this}return t.prototype.getUploadToken=function(t){var e=this,i=this.options;return o.default.formData()||(t.need_callback=1,"devaccount.meitu.com"===location.hostname&&(t.need_callback=2)),"https:"===location.protocol&&(t.is_https=1),new a.default(function(a,n){i.uploadToken&&i.uploadToken.key?a():e.http.request({method:"get",params:t,url:i.fetchTokenUrl,dataType:i.dataType}).then(function(t){var e=t.data;i.uploadTokenBackup=e.response.backup,i.uploadToken=e.response.main,a(e)}).catch(n)})},t.prototype._canvasResize=function(t,e){window.canvasResize(t,{width:this.options.imageWidth,crop:this.options.crop,quality:this.options.quality,rotate:this.options.rotate,callback:function(t){e(t)}})},t.prototype._formUpload=function(t,e,i,a){var n=this,r=this.options.uploadToken?this.options.uploadToken.token:"",s=this.options.uploadToken?this.options.uploadToken.key:"",d=this.options.uploadToken?this.options.uploadToken.upload_host:"";if(!o.default.formData())return"function"==typeof a&&a({token:r,key:s,host:d},this._uploadCallback),!1;var p=new FormData;p.append("token",r),p.append("key",s),p.append("file",t),this.http.post(d,p,{useAjax:!0,isUpload:!0,timeout:this.options.timeout,notCommonParams:!0,notAccessToken:!0,notUnloginToken:!0,cache:!1,processData:!1,contentType:!1,headers:{Authorization:"UpToken "+r}}).then(function(t){n._uploadCallback(t.data,e)}).catch(i)},t.prototype.formUpload=function(t,e,i){var n,o=this;void 0===e&&(e={}),void 0!==t.target&&(t=t.target),t.files&&(t=t.files[0]);var s=navigator.userAgent,d=s.substr(s.indexOf("Android")+8,3);n=(n=t.value?t.value.split("."):t.name.split("."))[n.length-1].toLowerCase();var p=(0,r.default)({ext:n,type:"avatar"},e);return new a.default(function(e,a){o.getUploadToken(p).then(function(){(parseInt(d,10)>4.3||s.indexOf("iPhone")>-1||s.indexOf("iPad")>-1)&&"undefined"!=typeof FileReader?o._canvasResize(t,function(t){o._base64Upload(t,e,a)}):o._formUpload(t,e,a,i)}).catch(a)})},t.prototype._base64Upload=function(t,e,i){var a=this;t=(t=t.replace("data:image/jpeg;base64,","").replace("data:image/png;base64,","")).replace("data:image/jpg;base64,","");var n=this.options.uploadToken,r=n?n.token:"",o=n?n.key:"",s=n?n.upload_host+"/putb64/-1/key/"+o:"";this.http.ajaxRequest({url:s,method:"post",data:t,useAjax:!0,isUpload:!0,timeout:this.options.timeout,notCommonParams:!0,notAccessToken:!0,notUnloginToken:!0,headers:{"Content-Type":"application/octet-stream",Authorization:"UpToken "+r}},function(t){a._uploadCallback(t.data,e)},i)},t.prototype.base64Upload=function(t,e){var i=this,n=(0,r.default)({ext:"jpg",type:"avatar"},e);return new a.default(function(e,a){i.getUploadToken(n).then(function(){i._base64Upload(t,e,a)}).catch(a)})},t.prototype._uploadCallback=function(t,e){var i=this.options.uploadToken||{};t.img=i.url||"",void 0!==i.url_with_token&&(t.img_with_token=i.url_with_token),e(t),this.options.uploadToken={},this.options.uploadTokenBackup={}},t}();e.default=u},"0NJB":function(t,e,i){t.exports=i.p+"app/img/china-idcard-back.be026ed.png"},Hj9D:function(t,e,i){"use strict";i.r(e);var a=i("gI6I"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},JlGt:function(t,e,i){"use strict";i.r(e);var a=i("PSIN"),n=i("z/w/");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("SnQv");var o=i("KHd+"),s=Object(o.a)(n.default,a.a,a.b,!1,null,null,null);s.options.__file="identity.card.upload.input.vue",e.default=s.exports},KNTo:function(t,e){},"Lno+":function(t,e,i){"use strict";e.__esModule=!0;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("mrSG")),n=d(i("MgzW")),r=i("YKMj"),o=d(i("0Ivh")),s=i("Q+em");function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype._uploadChooseImage=function(t,e,i){var a=this;void 0===t&&(t=function(){}),void 0===e&&(e={}),void 0===i&&(i={}),this.$actionSheet.open((0,n.default)({title:this.tr("texts.setAvatar","profile"),actions:[{text:this.tr("texts.openCamera","profile"),id:"camera"},{text:this.tr("texts.openAlbum","profile"),id:"photo"}],select:function(i){a._uploadChooseImageCommand(""+i.id,e,t),a.$actionSheet.close()}},i))},e.prototype._uploadRequest=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i={}),i=(0,n.default)({http:this.$http,unsupported:function(){}},i);var a=new o.default(i);return this.$isWeb||(0,s.isAppBrowserDebug)()?a.formUpload(t,e,i.unsupported):a.base64Upload(t,e)},e.prototype._uploadChooseImageCommand=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i=function(){}),this._uploadGetCameraDataEventListener(i),this.$command("camera"===t?"openCamera":"openPhotoLibrary",{data:e})},e.prototype._uploadGetCameraDataEventListener=function(t,e){void 0===t&&(t=function(t){}),void 0===e&&(e=!0);var i=this,a=i.$tr.text,n=window;n.removeEventListener("_getCameraData_",n.getCameraDataHandle||function(){}),n.getCameraDataHandle=function(n){if(!e)return t(n),!1;i.$command("getImageBase64",{pic:n.data[0].img},function(e){if(110===e.data.code)return i.$toast.show(a.imageBase64Error),!1;t(e.data.img)})},n.addEventListener("_getCameraData_",n.getCameraDataHandle)},a.__decorate([r.Component],e)}((0,r.Mixins)());e.default=p},PSIN:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"View identity-card-upload-input",class:{applying:t.applying}},[t._l(t.inputList,function(e){return i("input-group",{key:e.type,class:[e.type],attrs:{"padding-none":!0}},[i("input-item",{attrs:{label:e.label}},[i("div",{staticClass:"box"},[t.applying?t._e():i("p",{staticClass:"upload-tips",domProps:{textContent:t._s(e.tips)}}),t._v(" "),i("div",{staticClass:"boxes"},t._l(e.inputs,function(a,n){return i("div",{key:n,staticClass:"uploader",class:[a],on:{click:function(i){t.openCamera(a,e)}}},[t.pictureUrl(a)?i("img",{staticClass:"box img",class:{face:"face"===a},attrs:{src:t.pictureUrl(a)},on:{error:t.certPictureImgError}}):i("div",{staticClass:"box"},[i("i",{directives:[{name:"show",rawName:"v-show",value:!t.uploading[t.type],expression:"!uploading[type]"}],staticClass:"ficon ficon-add"})]),t._v(" "),i("p",{staticClass:"text",domProps:{textContent:t._s(t.inputLabelText(a))}}),t._v(" "),t.useFileInput?i("upload-form",{attrs:{type:a,name:t.form,data:t.formData,options:t.uploadOptions,callback:t.callbackName,"use-file-input":t.useFileInput},on:{upload:t.upload}}):t._e()],1)}))])])],1)}),t._v(" "),t._t("default")],2)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},PVy5:function(t,e,i){"use strict";i.r(e);var a=i("UXwX"),n=i("hX/0");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("xW/d");var o=i("KHd+"),s=Object(o.a)(n.default,a.a,a.b,!1,null,null,null);s.options.__file="phone.status.vue",e.default=s.exports},SnQv:function(t,e,i){"use strict";var a=i("edHM");i.n(a).a},UXwX:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"View phone-status",class:{"bg-white":t.bgWhite,"full-width":t.fullWidth}},[t.icon?i("icon",{attrs:{name:t.icon}}):t._e(),t._v(" "),t.titleText?i("h2",{staticClass:"title",domProps:{innerHTML:t._s(t.titleText)}}):t._e(),t._v(" "),t.desc||t.listText?i("section",{staticClass:"message"},[t.desc?i("h3",{staticClass:"text",domProps:{textContent:t._s(t.desc)}}):t._e(),t._v(" "),t.listText?i("ul",{staticClass:"list-text"},t._l(t.listText,function(e,a){return i("li",{key:a,staticClass:"item",domProps:{textContent:t._s(e)}})})):t._e()]):t._e(),t._v(" "),t._t("default"),t._v(" "),t.buttonText?i("mt-button",{attrs:{type:"primary"},domProps:{textContent:t._s(t.buttonText)},on:{click:function(e){t.$emit("button-click")}}}):t._e(),t._v(" "),i("footer",{staticClass:"fixed-footer"},[t._t("fixed-footer")],2)],2)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},VVqh:function(t,e,i){"use strict";var a=i("wwhZ");i.n(a).a},VsTG:function(t,e){t.exports='<page class="safety-identity-auth" :class="[action, method, status]" :bg-color="true">\n    <title-bar/>\n    <page-view v-if="fetched">\n        <page-title v-if="showPageTitle"\n                    :title="title"\n                    :description="titleDescription"\n                    :padding="true"\n                    :bg-white="true">\n        </page-title>\n        <phone-status-view v-if="isApplying"\n                           icon="phone-warn"\n                           :bg-white="true"\n                           :full-width="true"\n                           :title="tr(\'text.idAuthSubmittedTitle\')"\n                           :desc="tr(\'text.idAuthSubmittedTips\')">\n            <p class="action-tips" v-if="showApplyingActionTips" v-text="idAuthSubmittedActionTips">\n                \x3c!-- 审核通过后，请重新发起 XXX 操作。 --\x3e\n            </p>\n        </phone-status-view>\n        <phone-status-view v-if="isRealNameOrYingShiAuthenticated"\n                           icon="phone-passed"\n                           :bg-white="true"\n                           :full-width="true"\n                           :title="tr(\'tips.realNameAuthSuccess\')">\n        </phone-status-view>\n        <identity-input-view @input="onInputChange"\n                             @change-type="onChangeType"\n                             ref="identity-input-view"\n                             :type="certType"\n                             :only-passport="certTypeOnlyPassport"\n                             :selectable="certCanSelect"\n                             :encode="isEncode"\n                             :readonly="isIdCardInputReadOnly"\n                             :real-name="realName"\n                             :idcard="idcard"\n                             :real-name-label="tr(\'label.realName\')"\n                             :real-name-placeholder="tr(\'placeholder.realName\')"\n                             :idcard-label="tr(\'label.certNumber\')"\n                             :idcard-placeholder="tr(\'placeholder.idcard\')">\n        </identity-input-view>\n        <identity-card-upload-input-view v-if="showPhotoUploadInputs"\n                                         :type="certType"\n                                         :applying="isApplying"\n                                         :handheld="showHandheldInput"\n                                         :auth-method="method"\n                                         :face-picture="hasFacePicture"\n                                         :picture-list="pictures"\n                                         @uploaded="onUploaded">\n        </identity-card-upload-input-view>\n        <page-footer>\n            <mt-button type="primary"\n                       :disabled="buttonDisabled"\n                       @click="submit"\n                       v-text="submitButtonText">\n            </mt-button>\n            <p class="link revoke-auth"\n               v-if="isApplying"\n               @click="submitRevokeIdentityAuth"\n               v-text="tr(\'button.revokeIdAuth\')">\n            </p>\n            <p class="link text-right other-method"\n               v-if="showOtherMethodInLiveCheckIdAuthMethods"\n               @click="redirectToOtherIdAuthMethod"\n               v-text="otherIdAuthMethodLinkText">\n            </p>\n        </page-footer>\n    </page-view>\n</page>\n'},WpEB:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"View identity-upload-tips"},[i("h1",{staticClass:"title",domProps:{textContent:t._s(t.tr("text.uploadTip1"))}}),t._v(" "),i("div",{staticClass:"img-box"},[i("img",{staticClass:"cert-img",class:[t.certSelected.type,t.certSelected.openType,{face:t.isYingShiAuth&&!t.isSelectedIdcardHandheld}],attrs:{src:t.uploadTipPicture}}),t._v(" "),t.isSelectedIdcardHandheld||t.isSelectedPassportHandheld?i("img",{staticClass:"cert-type-img",class:t.certSelected.type,attrs:{src:t.handheldUploadTipPicture}}):t._e()]),t._v(" "),i("p",{staticClass:"cert-tips",domProps:{textContent:t._s(t.uploadTipsText1)}}),t._v(" "),t.isNotIdCardBack?i("p",{staticClass:"cert-tips",domProps:{textContent:t._s(t.uploadTipsText2)}}):t._e()])},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},YLQv:function(t,e,i){"use strict";var a=i("vnfM");i.n(a).a},ZWK6:function(t,e,i){t.exports=i.p+"app/img/figure.frame@3x.6cbd5d0.png"},c4WX:function(t,e,i){"use strict";i.r(e);var a=i("WpEB"),n=i("Hj9D");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("YLQv");var o=i("KHd+"),s=Object(o.a)(n.default,a.a,a.b,!1,null,null,null);s.options.__file="identity.upload.popup.tips.vue",e.default=s.exports},eJvS:function(t,e,i){t.exports=i.p+"app/img/china-idcard-front.60d5f79.png"},"ecJ+":function(t,e,i){"use strict";e.__esModule=!0;var a,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("mrSG")),r=(a=i("PzH0"))&&a.__esModule?a:{default:a},o=i("X8Hg"),s=i("YKMj"),d=i("9Ess"),p=i("S7WH"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.realNameText="",e.idcardText="",e.certSelected={name:"",type:"idcard",openType:"idcard-front"},e}return n.__extends(e,t),Object.defineProperty(e.prototype,"isVerify",{get:function(){return"verify"===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedIdcard",{get:function(){return"idcard"===this.certSelected.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedPassport",{get:function(){return"passport"===this.certSelected.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realNameMaxLength",{get:function(){return this.isSelectedPassport||this.isVerify?50:20},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idCardMaxLength",{get:function(){return this.isSelectedPassport?17:18},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"certName",{get:function(){return(0,d.tr)("idcard"===this.type?"text.chinaIdcard":"text.passport","safety")},enumerable:!0,configurable:!0}),e.prototype.created=function(){this.type&&(this.certSelected.type=this.type),this.certSelected.name||(this.certSelected.name=this.certName),this.realName&&(this.realNameText=this.realName),this.idcard&&(this.idcardText=this.idcard)},e.prototype.watchType=function(){this.certSelected.type=this.type,this.certSelected.name=this.certName},e.prototype.watchEncodeProperty=function(){this.encode&&(this.realNameText=(0,d.encodeRealName)(this.realNameText),this.idcardText=(0,d.encodeIdcardNumber)(this.idcardText))},e.prototype.watchRealNameInput=function(){this.$emit("input","realName",this.realNameText)},e.prototype.watchIdCardInput=function(){this.$emit("input","idcard",this.idcardText)},e.prototype.watchSelectedType=function(){this.$emit("change-type",this.certSelected.type)},e.prototype.selectCertificate=function(){if(!this.selectable)return!1;var t=this,e=this.certSelected.type,i=this.safetyIdentityInitResult;t.$actionSheet.open({title:(0,d.tr)("label.certType","safety"),selected:e,select:function(e){var a=e.id;i&&i[a]?(t.realNameText=i[a].realname||"",t.idcardText=i[a].id_number||""):(t.realNameText="",t.idcardText=""),t.certSelected.type=a,t.certSelected.name=e.text,this.close()},actions:[{id:"idcard",text:(0,d.tr)("text.chinaIdcard","safety")},{id:"passport",text:(0,d.tr)("text.passport","safety")}]})},n.__decorate([(0,p.State)("safetyIdentityInitResult"),n.__metadata("design:type",Object)],e.prototype,"safetyIdentityInitResult",void 0),n.__decorate([(0,s.Prop)({type:[String],default:"idcard"}),n.__metadata("design:type",String)],e.prototype,"type",void 0),n.__decorate([(0,s.Prop)({type:[String],default:""}),n.__metadata("design:type",String)],e.prototype,"realName",void 0),n.__decorate([(0,s.Prop)({type:[String],default:""}),n.__metadata("design:type",String)],e.prototype,"realNameLabel",void 0),n.__decorate([(0,s.Prop)({type:[String],default:""}),n.__metadata("design:type",String)],e.prototype,"idcard",void 0),n.__decorate([(0,s.Prop)({type:[String],default:""}),n.__metadata("design:type",String)],e.prototype,"idcardLabel",void 0),n.__decorate([(0,s.Prop)({type:[String],default:""}),n.__metadata("design:type",String)],e.prototype,"realNamePlaceholder",void 0),n.__decorate([(0,s.Prop)({type:[String],default:""}),n.__metadata("design:type",String)],e.prototype,"idcardPlaceholder",void 0),n.__decorate([(0,s.Prop)({type:[String,Boolean],default:!1}),n.__metadata("design:type",Object)],e.prototype,"readonly",void 0),n.__decorate([(0,s.Prop)(Boolean),n.__metadata("design:type",Boolean)],e.prototype,"onlyPassport",void 0),n.__decorate([(0,s.Prop)({type:[Boolean],default:!0}),n.__metadata("design:type",Boolean)],e.prototype,"selectable",void 0),n.__decorate([(0,s.Prop)({type:[Boolean],default:!1}),n.__metadata("design:type",Boolean)],e.prototype,"encode",void 0),n.__decorate([(0,s.Watch)("type"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],e.prototype,"watchType",null),n.__decorate([(0,s.Watch)("encode"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],e.prototype,"watchEncodeProperty",null),n.__decorate([(0,s.Watch)("realNameText"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],e.prototype,"watchRealNameInput",null),n.__decorate([(0,s.Watch)("idcardText"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],e.prototype,"watchIdCardInput",null),n.__decorate([(0,s.Watch)("certSelected.type"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],e.prototype,"watchSelectedType",null),n.__decorate([(0,s.Component)({name:"identity-input-view",data:function(){return{$trPage:"safety"}},components:{Icon:r.default,MtInput:o.MtInput,InputGroup:o.InputGroup}})],e)}(s.Vue);e.default=u},edHM:function(t,e){},fPk5:function(t,e,i){"use strict";e.__esModule=!0;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("mrSG")),n=i("YKMj"),r=_(i("+CIO")),o=i("9Ess"),s=_(i("MgzW")),d=_(i("lqyy")),p=_(i("ouqR")),u=_(i("PVy5")),c=_(i("JlGt"));i("gbjT");var l=i("lzrX"),h=i("AFph"),f=i("kWpp"),y=i("KEQF"),m=i("uOKE");function _(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fetched=!1,e.authId="",e.realName="",e.idcard="",e.certType="idcard",e.certTypeOnlyPassport=!1,e.pictures={},e.hasFacePicture=!1,e.allUploaded=!1,e.hasHandheld=!1,e.submitting=!1,e}return a.__extends(e,t),Object.defineProperty(e.prototype,"title",{get:function(){return this.tr("titleOfIdAuth")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleDescription",{get:function(){var t=this.tr("text.idAuthHeaderTip");return this.isApplying&&(t=""),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNotLoginedAppeal",{get:function(){return"not_logined_appeal"===this.$route.query.from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idCardTypeNum",{get:function(){return"passport"===this.certType?2:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonDisabled",{get:function(){var t=!1;return this.realName&&this.idcard&&(this.allUploaded||!this.showPhotoUploadInputs)||(t=!0),this.isApplying&&(t=!1),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"action",{get:function(){return this.$route.params.action||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this.$route.params.method||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.$route.params.status||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPageTitle",{get:function(){var t=!0;return(this.isApplying||this.isRealNameOrYingShiAuthenticated)&&(t=!1),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPhotoUploadInputs",{get:function(){var t=!0;return this.isRealNameOrYingShiAuthenticated?t=!1:(this.isZmxyCertification||this.isWeBankAuth)&&this.isSelectedIdCard?t=!1:this.isRealNameAuth&&this.isSelectedIdCard&&(t=!1),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appealToken",{get:function(){var t=this.isNotLoginedAppeal?this.getTempData.safetyAppealParams:this._safetyAppeal;return t?t.appeal_token:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opTypeName",{get:function(){var t="",e=this._safetyAppeal;return e&&(void 0!==e.op_type_name&&(t=e.op_type_name),t||void 0===e.audit_info||(t=e.audit_info.op_type_name)),t||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpType",{get:function(){var t=0,e=this._safetyAppeal;return e&&(void 0!==e.op_type?t=parseInt(e.op_type,10):void 0!==e.audit_info&&(t=parseInt(e.audit_info.op_type,10))),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFromAccount",{get:function(){return"account"===this.$route.query.from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isApplying",{get:function(){return"applying"===this.action},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAppeal",{get:function(){return"appeal"===this.action},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAppealAuth",{get:function(){return"auth_appeal"===this.action},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedIdCard",{get:function(){return"idcard"===this.certType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedPassport",{get:function(){return"passport"===this.certType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isIdCardInputReadOnly",{get:function(){return this.isApplying||this.isRealNameOrYingShiAuthenticated||this.isUpgraded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWeBankAuth",{get:function(){return"webank"===this.method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWeBankAuthNeedHandheld",{get:function(){return this.isWeBankAuth&&this.isNeedHandheld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isZmxyCertification",{get:function(){return"zhima"===this.method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isZmxyCertificationNeedHandheld",{get:function(){return this.isZmxyCertification&&this.isNeedHandheld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAuthenticatedStatus",{get:function(){return"authenticated"===this.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRealNameAuth",{get:function(){return"real_name"===this.method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRealNameAuthenticated",{get:function(){return this.isAuthenticatedStatus&&"real_name"===this.method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNeedHandheld",{get:function(){return"1"===this.$route.query.handheld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPassportNeedHandheld",{get:function(){return"1"===this.$route.query.passport_handheld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isIdAuthNeedHandheld",{get:function(){return"auth"===this.action&&this.isNeedHandheld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isYingShiAuth",{get:function(){return"yingshi"===this.method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isYingShiAuthNeedHandheld",{get:function(){return this.isYingShiAuth&&this.isNeedHandheld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isYingShiAuthenticated",{get:function(){return this.isAuthenticatedStatus&&"yingshi"===this.method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRealNameOrYingShiAuthenticated",{get:function(){return this.isRealNameAuthenticated||this.isYingShiAuthenticated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNotLoggedInAppeal",{get:function(){return"not_logined_appeal"===this.$route.query.from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNeedIdentityInit",{get:function(){var t=!this._safetyIdentityIsInit;return(this.isNotLoggedInAppeal||this.isApplying||this.isAppealAuth||this.isRealNameOrYingShiAuthenticated)&&(t=!1),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNeedRequestIdentityInfo",{get:function(){return this.isApplying||this.isAppeal||this.isRealNameOrYingShiAuthenticated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showApplyingActionTips",{get:function(){return this.isApplying&&this.fetched&&!this.isFromAccount&&9!==this.isOpType&&10!==this.isOpType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idAuthSubmittedActionTips",{get:function(){return this.tr("text.idAuthSubmittedAction").replace("{action}"," [ "+this.opTypeName+" ] ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"submitButtonText",{get:function(){var t=this.$tr.text,e=t.submit;return this.submitting?e=t.submitting:this.isApplying||this.isAppeal||this.isYingShiAuthenticated?e=t.back:this.isRealNameAuthenticated?e=t.continue:(this.isZmxyCertification||this.isWeBankAuth)&&(e=this.tr("button.submitOfZmxy"),this.isSelectedPassport&&(e=t.next)),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"from",{get:function(){return this.$route.query.from||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idAuthFromZmxy",{get:function(){return"zmxy"===this.from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idAuthFromWeBank",{get:function(){return"webank"===this.from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idAuthFromYingShi",{get:function(){return"yingshi"===this.from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"otherIdAuthMethod",{get:function(){return this.$route.query.other_auth_method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"otherIdAuthMethodLinkText",{get:function(){var t=this.tr("text.uploadIdCardPhoto");return(this.isZmxyCertificationNeedHandheld||this.isWeBankAuthNeedHandheld)&&(t=this.tr("text.uploadHandheldIdCardPhoto")),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOtherIdAuthMethodByYingShi",{get:function(){return"yingshi"===this.otherIdAuthMethod},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOtherMethodInLiveCheckIdAuthMethods",{get:function(){var t=this.isZmxyCertification||this.isWeBankAuth,e=this._safetyIdentityInitResult;return e&&e.idcard&&0===e.idcard.extra.length&&(t=!1),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHandheldInput",{get:function(){var t=!1;return(this.isNeedHandheld||this.hasHandheld||this.isSelectedPassport&&this.isPassportNeedHandheld)&&(t=!0),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEncode",{get:function(){var t=!1;return(this.isRealNameOrYingShiAuthenticated||this.isApplying)&&(t=!0),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUpgraded",{get:function(){var t=!1,e=this._safetyIdentityInitResult;if(e)try{(e.idcard||e.passport)&&(e.idcard.id_number&&e.idcard.realname&&this.isSelectedIdCard||e.passport.id_number&&e.passport.realname&&this.isSelectedPassport)&&(t=!0)}catch(t){}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUpgradeZmxyCertification",{get:function(){return this.isUpgraded&&this.isZmxyCertification},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUpgradeWeBankAuth",{get:function(){return this.isUpgraded&&this.isWeBankAuth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"certCanSelect",{get:function(){var t=!0,e=this._safetyIdentityInitResult;return(this.isApplying||this.certTypeOnlyPassport||this.isRealNameOrYingShiAuthenticated||e&&(!e.idcard||!e.passport))&&(t=!1),t},enumerable:!0,configurable:!0}),e.prototype.beforeRouteUpdate=function(t,e,i){if(i(),this.start(),this.showOtherMethodInLiveCheckIdAuthMethods){var a=this.$refs["identity-input-view"];a&&(a.realNameText&&(this.realName=a.realNameText),a.idcardText&&(this.idcard=a.idcardText))}},e.prototype.beforeRouteLeave=function(t,e,i){this.certType="idcard",this.$actionSheet&&this.$actionSheet.close(),i()},e.prototype.created=function(){this.start()},e.prototype.start=function(){if(this.checkNeedIdentityAuthInit())return this.identityInitRequest(),!1;this._start()},e.prototype.identityInitRequest=function(){var t=this;this._safetyIdentityInit().then(function(e){t._start()}).catch(function(){t.$router.replace(l.ROUTE_ACCOUNT)})},e.prototype._start=function(){var t=this;if(this.$toast.hide(),this.isNeedRequestIdentityInfo)this.requestIdentityInfo();else if(this.isAppealAuth)this.setIdentityAuthStateData();else{if(this.isNotLoggedInAppeal)return this.getTempData.safetyAppealParams?(2===this.getTempData.safetyAppealParams.appeal_by?(this.certType="passport",this.certTypeOnlyPassport=!0):this.certType="idcard",this.fetched=!0,!1):(window.history.go(-1),!1);var e=this._safetyIdentityInitResult;if(this.certType="idcard",e.idcard||(this.certType="passport",this.certTypeOnlyPassport=!0),this.authId=this.getAuthId(),this.isRealNameAuth||this.isZmxyCertification||this.isWeBankAuth){if(this.setTempData({isSafetyDispatch:!0}),this.isZmxyCertification||this.isWeBankAuth){var i=this._temp.safetyPrevIdentityInitResult;return i&&this.setSafetyAppeal((0,s.default)(this._safetyAppeal,{appeal_token:i.appeal_token})),this.readRealNameAndIdNumberData(),this.fetched=!0,!1}return this.setSafetyActionCode(h.SAFETY_OP_TYPE_REAL_NAME_AUTH),this._safetyRequestCheckCredibilityDevice().then(function(){t.readRealNameAndIdNumberData(),t.fetched=!0}),!1}this.readRealNameAndIdNumberData(),this.fetched=!0}},e.prototype.getAuthId=function(){var t="",e=this._safetyAppeal;return void 0!==e.audit_info&&(t=e.audit_info.id),t},e.prototype.requestIdentityInfo=function(){var t=this;this.$toast.showLoading(),this.$api.safety.identityInfo().then(function(e){var i=e.data.response;if(t.setSafetyAppeal((0,s.default)(t._safetyAppeal||{},i)),t.$toast.hide(),!i.has_idcard&&void 0===i.audit_info)return t.$router.replace(l.ROUTE_ACCOUNT),!1;t.setIdentityAuthStateData(),t.requestIdentityInfoSuccessSetBackingHandler(),t.fetched=!0}).catch(function(e){if(e.failure){var i=e.data.meta;t.$toast.show(i.msg)}else t.$toast.show(t.$tr.text.submitError)})},e.prototype.requestIdentityInfoSuccessSetBackingHandler=function(){var t=this;this._temp.isSafetyDispatch&&this.$setAppBackingHandler(function(){t.$commandBackingStop(),t.isRealNameOrYingShiAuthenticated?(t._safetyVerifySuccessNotice(h.SAFETY_VERIFY_OP_TYPE_NAME_IDENTITY),t.setTempData({isSafetyDispatch:!1})):t._safetyDispatchVerifyAuditingNotice(),t.$removeAppBackingHandler(),t.$commandBacking()})},e.prototype.checkNeedIdentityAuthInit=function(){var t=!1;return this.isNeedIdentityInit&&(t=!0),t},e.prototype.setPicturesUrl=function(t){var e=this,i=function(t){for(var i in t)e.$set(e.pictures,i,{img:t[i]})};"passport"===this.certType?i({passport_info:t.idcard_pic||"",passport_handheld:t.idcard_pic_hand||""}):(this.hasFacePicture=!!t.face_pic,i({idcard_front:t.idcard_pic||"",idcard_face:t.face_pic||"",idcard_back:t.idcard_pic_opposite||"",idcard_handheld:t.idcard_pic_hand||""}))},e.prototype.setIdentityAuthStateData=function(t){if(void 0===t&&!this._safetyAppeal)return this.$router.replace(l.ROUTE_ACCOUNT),!1;var e=null;if(t&&void 0!==t.audit_info?e=t.audit_info:this._safetyAppeal&&(e=this._safetyAppeal.audit_info),this.authId=this.getAuthId(),this.isNeedRequestIdentityInfo){if(this.isRealNameOrYingShiAuthenticated&&(e=this._safetyAppeal),!e)return this.fetched=!1,this.$router.replace(l.ROUTE_SAFETY_IDENTITY_AUTHENTICATED),!1;void 0!==e.id&&(this.authId=e.id),this.realName=e.realname,this.idcard=e.id_number,this.certType="2"===e.idcard_type?"passport":"idcard",this.setPicturesUrl(e),e.idcard_pic_hand&&(this.hasHandheld=!0)}if(this.isRealNameOrYingShiAuthenticated)return this.fetched=!0,!1;if(void 0!==e&&!this.isApplying)return this.$router.replace(l.ROUTE_SAFETY_ID_AUTH_APPLYING),!1;if(this.isAppealAuth){this.certType="idcard";var i=t||this._safetyAppeal;i&&void 0!==i.has_phone&&i.has_phone&&i.phone_cc&&"86"!==i.phone_cc.toString()&&(this.certType="passport",this.certTypeOnlyPassport=!0)}this.fetched=!0},e.prototype.onInputChange=function(t,e){"realName"===t?this.realName=e.trim():"idcard"===t&&(this.idcard=e.trim())},e.prototype.onUploaded=function(t,e){this.pictures=t,this.allUploaded=e},e.prototype.onChangeType=function(t){this.certType=t;var e=this._safetyIdentityInitResult;"passport"===t?e&&e.passport&&(this.realName=e.passport.realname,this.idcard=e.passport.id_number):e&&e.idcard&&(this.realName=e.idcard.realname,this.idcard=e.idcard.id_number)},e.prototype.routeToAccountPage=function(){this.$router.replace(l.ROUTE_ACCOUNT)},e.prototype.submitApplyingBack=function(){return this.getTempData.isSafetyDispatch?(this._safetyDispatchVerifyAuditingNotice(),!1):(this.$removeAppBackingHandler(),this.routeToAccountPage(),!1)},e.prototype.submitRealNameOrYingShiAuthenticatedBack=function(){if(this.getTempData.isSafetyDispatch)return this._safetyVerifySuccessNotice(h.SAFETY_VERIFY_OP_TYPE_NAME_IDENTITY),this.setTempData({zmxyClosed:!1,isSafetyDispatch:!1}),!1;this.$removeAppBackingHandler(),this.routeToAccountPage()},e.prototype.submit=function(){if(this.isApplying||this.isAppeal)return this.submitApplyingBack(),!1;if(this.isRealNameOrYingShiAuthenticated)return this.submitRealNameOrYingShiAuthenticatedBack(),!1;if(this.idcard||(this.idcard=""),this.realName||(this.realName=""),this.idcard=this.idcard.trim(),this.realName=this.realName.trim(),!this.isIdCardInputReadOnly)if(this.isSelectedIdCard){if(!this.realName)return this.$toast.show(this.tr("placeholder.realName")),!1;if(!r.default.chineseName.test(this.realName)&&!this.isUpgraded)return this.$toast.show(this.tr("tips.realChineseNameError")),!1;if(this.idcard=this.idcard.replace("x","X"),!r.default.idCard1518.test(this.idcard)&&!this.isUpgraded)return this.$toast.show(this.tr("tips.idcardError")),!1}else if(this.isSelectedPassport){if(!this.realName.trim())return this.$toast.show(this.tr("placeholder.realName")),!1;if(!r.default.passportName.test(this.realName)&&!this.isUpgraded)return this.$toast.show(this.tr("tips.realNameError")),!1;if(!r.default.passport.test(this.idcard)&&!this.isUpgraded)return this.$toast.show(this.tr("tips.passportError")),!1}if(!this.allUploaded&&this.showPhotoUploadInputs)return this.$toast.show(this.tr("tips.emptyIdPicture")),!1;if(this.submitting)return!1;if(this.$toast.showLoading(),this.submitting=!0,this.isZmxyCertification||this.isWeBankAuth){if(this.isSelectedPassport)return this.submitIdentityAuth(),!1;if(this.isWeBankAuth)return this.submitWeBankAuth(),!1;this.submitZmxyCertification()}else this.submitIdentityAuth()},e.prototype.submitIdentityAuth=function(){var t=this,e=this.idCardTypeNum,i={type:e,realname:this.realName,id_number:this.idcard,appeal_token:this.appealToken};this.showPhotoUploadInputs&&(1===e?(this.isYingShiAuth?(i.face_pic=this.pictures.idcard_face.img,i.face_pic_url_sig=this.pictures.idcard_face.url_sig):(i.idcard_pic=this.pictures.idcard_front.img,i.idcard_pic_opposite=this.pictures.idcard_back.img,i.idcard_pic_url_sig=this.pictures.idcard_front.url_sig,i.idcard_pic_opposite_url_sig=this.pictures.idcard_back.url_sig),this.isNeedHandheld&&(i.idcard_pic_hand=this.pictures.idcard_handheld.img,i.idcard_pic_hand_url_sig=this.pictures.idcard_handheld.url_sig)):2===e&&(i.idcard_pic=this.pictures.passport_info.img,i.idcard_pic_opposite="",i.idcard_pic_url_sig=this.pictures.passport_info.url_sig,i.idcard_pic_opposite_url_sig="",(this.isNeedHandheld||this.isPassportNeedHandheld)&&(i.idcard_pic_hand=this.pictures.passport_handheld.img,i.idcard_pic_hand_url_sig=this.pictures.passport_handheld.url_sig))),this.isRealNameAuth&&(i.is_safe=1),this.$api.safety.identityValidate(i).then(function(){t.$toast.hide(),t.resetPrevIdentityInitResult(),t.setFormSubmitData({identityValidate:i}),t.identityValidatedNext()}).catch(function(e){if(t.$toast.hide(),t.submitButtonReset(),e.failure){var i=e.data.meta,a=i.code,n=i.msg;a===f.ERROR_ID_INFO_NOT_MATCH?t.showIdentityInfoNotMatchDialog(n):a===f.ERROR_YING_SHI_ID_INFO_NOT_MATCH?t.showYingShiIdentityInfoNotMatchDialog(n):t.$toast.show(i.msg)}else t.$toast.show(t.$tr.text.submitError)})},e.prototype.identityValidatedNext=function(){var t=this._safetyAppeal;if(this.isRealNameAuth&&t.has_phone&&this.isSelectedIdCard)return this.submitRealNameIdentity(),!1;var e=l.ROUTE_SAFETY_ID_AUTH_SET_PHONE;if(this.isYingShiAuth&&this.isSelectedIdCard&&(e+="?auth=yingshi&handheld="+(this.isYingShiAuthNeedHandheld?1:0)),this._safetyActionCode===h.SAFETY_OP_TYPE_PHONE_CHANGE&&(e=l.ROUTE_CHANGE_PHONE_FROM_ID_AUTH),this.isNotLoggedInAppeal&&(e=l.ROUTE_SAFETY_SET_ACCOUNT),this.submitButtonReset(),this.isYingShiAuth&&!this.isYingShiAuthNeedHandheld&&this.isSelectedIdCard&&t.has_phone)return this.submitYingShiIdentityAuth(),!1;this.$router[this.isNotLoggedInAppeal?"push":"replace"](e)},e.prototype.submitRealNameIdentity=function(){var t=this,e=this._safetyAppeal,i="";if(this.isNotLoggedInAppeal){var a=this.$store.state.temp.safetyAppealParams;i=a?a.appeal_token:""}else i=e?e.appeal_token:"";var n={appeal_token:i};this.$api.safety.identityAuthSubmit(n).then(function(){t.submitButtonReset(),t.$router.replace(l.ROUTE_SAFETY_REAL_NAME_AUTHENTICATED)}).catch(function(e){if(t.submitButtonReset(),e.failure){var i=e.data.meta;t.$toast.show(i.msg)}else t.$toast.show(t.$tr.text.submitError)})},e.prototype.showIdentityInfoNotMatchDialog=function(t){var e=this;this.$dialog.confirm({title:this.tr("text.infoNotMatch"),content:t,buttons:[{type:"primary",text:this.$tr.text.retry},{text:this.$tr.text.continue,click:function(){e.identityValidatedNext()}}]})},e.prototype.showYingShiIdentityInfoNotMatchDialog=function(t){var e=this;this.$dialog.confirm({title:this.tr("text.infoNotMatch"),content:t,buttons:[{type:"primary",text:this.$tr.text.yes,click:function(){e.yingShiAuthFailedSwitchToDefaultIdentityAuth()}},{text:this.$tr.text.no}]})},e.prototype.submitButtonReset=function(){this.submitting=!1},e.prototype.getLiveCheckAuthMethodParams=function(){return{appeal_token:this.appealToken,realname:this.realName,id_number:this.idcard}},e.prototype.checkLiveCheckAuthMethodSupport=function(t){var e=!0;return void 0!==t.support&&0===t.support&&(this.submitButtonReset(),this.showNotSupportThisAuthMethodAlert(),e=!1),e},e.prototype.liveCheckAuthMethodCallbackNotice=function(t,e,i){var a=this;void 0===i&&(i=!1);var n=parseInt(e.certify_result,10),r=function(){return{type:t,realname:a.realName,id_number:a.idcard}};if(1===n)this.resetPrevIdentityInitResult(),this._safetyVerifySuccessNotice(r());else if(0===n){var o=m.NOTICE_SAFETY_VERIFY_FAILED;i&&(o=m.NOTICE_SAFETY_VERIFY_CANCELED),this._appNoticeCommand(o,r())}},e.prototype.submitWeBankAuth=function(){var t=this,e=this.getLiveCheckAuthMethodParams();this.$api.safety.weBankAuthenticationParams(e).then(function(e){var i=e.data.response;(0,y.commandOpenWeBankAuth)(i,function(e){var a=e.data;if(t.submitting=!1,!t.checkLiveCheckAuthMethodSupport(a))return!1;t.submitWeBankAuthenticationCallbackRequest(i.agreementNo,a)})}).catch(function(e){t.$toast.hide(),e.failure?t.$toast.show(e.data.meta.msg):t.$toast.show(t.$tr.text.submitError),t.submitting=!1})},e.prototype.submitWeBankAuthenticationCallbackRequest=function(t,e){var i=this;void 0===e&&(e={}),this.$toast.showLoading(this.$tr.text.verifying),e=(0,s.default)({order_no:t,appeal_token:this.appealToken},e),this.$api.safety.weBankAuthenticationCallback(e).then(function(t){i.$toast.hide();var a=t.data.response;i.setTempData({webankRealName:"",webankIdCardNumber:""}),i.liveCheckAuthMethodCallbackNotice(h.SAFETY_VERIFY_OP_TYPE_NAME_WEBANK,a,1===e.is_canceled)}).catch(function(t){i.$toast.hide(),t.failure?i.$toast.show(t.data.meta.msg):i.$toast.show(i.$tr.text.submitError)})},e.prototype.submitZmxyCertification=function(){var t=this,e=this.getLiveCheckAuthMethodParams();this.$api.safety.zmxyCertificationParams(e).then(function(e){var i=e.data.response;(0,y.commandOpenZmxyAuth)(i.biz_no,function(e){var a=e.data;if(t.submitting=!1,!t.checkLiveCheckAuthMethodSupport(a))return!1;t.submitZmxyCertificationCallbackRequest(i.biz_no,a)})}).catch(function(e){t.$toast.hide(),e.failure?t.$toast.show(e.data.meta.msg):t.$toast.show(t.$tr.text.submitError),t.submitting=!1})},e.prototype.submitZmxyCertificationCallbackRequest=function(t,e){var i=this;void 0===e&&(e={}),this.$toast.showLoading(this.$tr.text.verifying),e=(0,s.default)({biz_no:t,appeal_token:this.appealToken},e),this.$api.safety.zmxyCertificationCallback(e).then(function(t){i.$toast.hide();var a=t.data.response;i.setTempData({zmxyRealName:"",zmxyIdCardNumber:""}),i.liveCheckAuthMethodCallbackNotice(h.SAFETY_VERIFY_OP_TYPE_NAME_ZMXY,a,1===e.is_canceled)}).catch(function(t){i.$toast.hide(),t.failure?i.$toast.show(t.data.meta.msg):i.$toast.show(i.$tr.text.submitError)})},e.prototype.readRealNameAndIdNumberData=function(t){void 0===t&&(t=null),this.idAuthFromZmxy&&(this.realName=this.getTempData.zmxyRealName,this.idcard=this.getTempData.zmxyIdCardNumber),this.idAuthFromYingShi&&(this.realName=this.getTempData.yingShiAuthRealName,this.idcard=this.getTempData.yingShiIdCardNumber),this.idAuthFromWeBank&&(this.realName=this.getTempData.webankRealName,this.idcard=this.getTempData.webankIdCardNumber),this.isZmxyCertification?(this.realName=this.getTempData.zmxyRealName,this.idcard=this.getTempData.zmxyIdCardNumber):this.isWeBankAuth&&(this.realName=this.getTempData.webankRealName,this.idcard=this.getTempData.webankIdCardNumber);var e=this._safetyIdentityInitResult;e&&(e.idcard&&this.isSelectedIdCard&&("idcard"===t&&(this.realName="",this.idcard=""),this.realName||(this.realName=e.idcard.realname||""),this.idcard||(this.idcard=e.idcard.id_number||"")),e.passport&&this.isSelectedPassport&&("passport"===t&&(this.realName="",this.idcard=""),this.realName||(this.realName=e.passport.realname||""),this.idcard||(this.idcard=e.passport.id_number||""))),this.realName||(this.realName=""),this.idcard||(this.idcard="")},e.prototype.resetPrevIdentityInitResult=function(){this.getTempData.safetyPrevIdentityInitResult&&this.setTempData({safetyPrevIdentityInitResult:null})},e.prototype.yingShiAuthFailedSwitchToDefaultIdentityAuth=function(){var t=this._safetyIdentityInitResult,e={auth_type:h.SAFETY_IDENTITY_AUTH_TYPE_REAL_PERSON,need_live_check:0,need_identity_pic:1,need_handheld_pic:1,idcard_type:"default",idcard_extra:"identity_photo,handheld"};t.passport&&(e.passport_type="default",e.passport_extra="handheld"),this._safetyIdentityAuthStart(e,!0,{from:"yingshi"})},e.prototype.submitYingShiIdentityAuth=function(){var t=this,e=this._safetyAppeal;this.submitting=!0;var i={appeal_token:e.appeal_token,phone_cc:e.phone_cc,phone:e.phone,verify_code:""};this.$api.safety.identityAuthSubmit(i).then(function(){t.submitButtonReset(),t.$router.replace(l.ROUTE_SAFETY_YINGSHI_AUTHENTICATED)}).catch(function(e){if(t.submitButtonReset(),e.failure){var i=e.data.meta;t.$toast.show(i.msg)}else t.$toast.show(t.$tr.text.submitError)})},e.prototype.showNotSupportThisAuthMethodAlert=function(){var t=this;this.$dialog.alert({content:this.tr("tips.notSupportThisAuthMethod"),buttons:[{type:"primary",text:this.$tr.text.ok,click:function(){t.$dialog.close()}}]})},e.prototype.submitRevokeIdentityAuth=function(){this._safetyRevokeIdAuth(this.authId)},e.prototype.redirectToOtherIdAuthMethod=function(){var t={need_identity_pic:1};(this.isZmxyCertificationNeedHandheld||this.isWeBankAuthNeedHandheld)&&(t.auth_type=h.SAFETY_IDENTITY_AUTH_TYPE_REAL_PERSON,t.need_handheld_pic=1),this.isOtherIdAuthMethodByYingShi&&(t.auth_type=h.SAFETY_IDENTITY_AUTH_TYPE_REAL_PERSON),this.setTempData({safetyPrevIdentityInitResult:(0,o.clone)(this._safetyAppeal)}),this._safetyIdentityAuthStart(t,!1,{from:this.isWeBankAuth?"webank":"zmxy"})},a.__decorate([(0,n.Component)({name:"page-identity-auth",data:function(){return{$trPage:"safety"}},components:{PhoneStatusView:u.default,IdentityInputView:p.default,IdentityCardUploadInputView:c.default},template:i("VsTG")})],e)}((0,n.Mixins)(d.default));e.default=g},gI6I:function(t,e,i){"use strict";e.__esModule=!0;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("mrSG")),n=i("YKMj"),r=i("SfAH"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return a.__extends(e,t),Object.defineProperty(e.prototype,"isYingShiAuth",{get:function(){return"yingshi"===this.authType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isIdAuthNeedHandheld",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedIdcard",{get:function(){return"idcard"===this.certSelected.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedPassport",{get:function(){return"passport"===this.certSelected.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNotIdCardBack",{get:function(){return"idcard-back"!=this.certSelected.openType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedIdcardHandheld",{get:function(){return"idcard-handheld"===this.certSelected.openType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedPassportHandheld",{get:function(){return"passport-handheld"===this.certSelected.openType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uploadTipsText1",{get:function(){var t="text.uploadTip2",e=this.isSelectedIdcardHandheld;return e&&this.isIdAuthNeedHandheld&&(t="text.uploadTip4"),this.isYingShiAuth&&this.isSelectedIdcard&&(t=e?"text.uploadTip4":"text.uploadTip6"),this.isSelectedPassportHandheld&&(t="text.uploadTip8"),this.tr(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uploadTipsText2",{get:function(){var t="text.uploadTip3",e=this.isSelectedIdcardHandheld;return e&&this.isIdAuthNeedHandheld&&(t="text.uploadTip5"),this.isYingShiAuth&&this.isSelectedIdcard&&(t=e?"text.uploadTip5":"text.uploadTip7"),this.isSelectedPassportHandheld&&(t="text.uploadTip5"),this.tr(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uploadTipPicture",{get:function(){var t="",e=this.certSelected;return"idcard-front"===e.openType?t=i("eJvS"):"idcard-back"===e.openType?t=i("0NJB"):"idcard-handheld"===e.openType||"passport-handheld"===e.openType?t=i("ZWK6"):"passport"===e.type?t=i("xF3S"):"face"===e.openType&&(t=i("ZWK6")),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handheldUploadTipPicture",{get:function(){var t=i("eJvS");return"passport"===this.certSelected.type&&(t=i("xF3S")),t},enumerable:!0,configurable:!0}),a.__decorate([(0,n.Prop)({type:[String],default:"idcard"}),a.__metadata("design:type",String)],e.prototype,"authType",void 0),a.__decorate([(0,n.Prop)({type:[Object],default:function(){return{name:"",type:"idcard",openType:"idcard-front"}}}),a.__metadata("design:type","function"==typeof(o=void 0!==r.CertificateSelectedData&&r.CertificateSelectedData)&&o||Object)],e.prototype,"certSelected",void 0),a.__decorate([(0,n.Component)({data:function(){return{$trPage:"safety"}}})],e)}((0,n.Mixins)());e.default=o},gbjT:function(t,e){},"hX/0":function(t,e,i){"use strict";i.r(e);var a=i("iTC4"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},iTC4:function(t,e,i){"use strict";e.__esModule=!0;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("mrSG")),n=i("YKMj"),r=d(i("PzH0")),o=d(i("J+9/")),s=i("9Ess");function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),Object.defineProperty(e.prototype,"phoneNum",{get:function(){return this.phone?(0,s.encodePhone)(this.phone.toString()):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleText",{get:function(){return this.phoneNum||this.title},enumerable:!0,configurable:!0}),a.__decorate([(0,n.Prop)([String,Number]),a.__metadata("design:type",Object)],e.prototype,"phone",void 0),a.__decorate([(0,n.Prop)(String),a.__metadata("design:type",String)],e.prototype,"icon",void 0),a.__decorate([(0,n.Prop)(String),a.__metadata("design:type",String)],e.prototype,"desc",void 0),a.__decorate([(0,n.Prop)(String),a.__metadata("design:type",String)],e.prototype,"buttonText",void 0),a.__decorate([(0,n.Prop)(Array),a.__metadata("design:type",Array)],e.prototype,"listText",void 0),a.__decorate([(0,n.Prop)(String),a.__metadata("design:type",String)],e.prototype,"title",void 0),a.__decorate([(0,n.Prop)(Boolean),a.__metadata("design:type",Boolean)],e.prototype,"bgWhite",void 0),a.__decorate([(0,n.Prop)(Boolean),a.__metadata("design:type",Boolean)],e.prototype,"fullWidth",void 0),a.__decorate([(0,n.Component)({components:{Icon:r.default,MtButton:o.default}})],e)}(n.Vue);e.default=p},mnJY:function(t,e,i){"use strict";e.__esModule=!0;var a=h(i("EJiy")),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("mrSG")),r=h(i("PzH0")),o=i("X8Hg"),s=i("YKMj"),d=h(i("Lno+")),p=h(i("lqyy")),u=h(i("m4H0")),c=h(i("c4WX")),l=i("SfAH");function h(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.inputList=[],e.pictures={},e.uploading={handheld:!1,back:!1,front:!1,passportHandheld:!1,passport:!1},e.certSelected={name:"",type:"idcard",openType:"idcard-front"},e}var i;return n.__extends(e,t),e.prototype.watchPictures=function(){this.$emit("uploaded",this.pictures,this.allUploaded)},e.prototype.watchTypeProperty=function(){this.getInputList(),this.certSelected.type=this.type},e.prototype.watchHandheld=function(){this.getInputList()},e.prototype.watchAuthMethod=function(){this.getInputList()},Object.defineProperty(e.prototype,"useFileInput",{get:function(){return!this.applying&&this.$isWeb},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isIdCard",{get:function(){return"idcard"===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPassport",{get:function(){return"passport"===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){var t=["front","back"];return this.isPassport?t=["info"]:(this.isYingShiAuth||this.facePicture)&&(t=["face"]),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputTotal",{get:function(){var t=0;return this.inputList.forEach(function(e){t+=e.inputs.length}),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allUploaded",{get:function(){var t=this,e=[];return this.inputList.forEach(function(i){i.inputs.forEach(function(i){t.pictureUrl(i)&&e.push(i)})}),e.length===this.inputTotal},enumerable:!0,configurable:!0}),e.prototype.created=function(){this.type&&(this.certSelected.type=this.type,this.certSelected.name=this.certName),this.pictures=this.pictureList,this.getInputList()},Object.defineProperty(e.prototype,"isYingShiAuth",{get:function(){return"yingshi"===this.authMethod},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"certName",{get:function(){return this.tr("idcard"===this.type?"text.chinaIdcard":"text.passport","safety")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNotLoginedAppeal",{get:function(){return"not_logined_appeal"===this.$route.query.from},enumerable:!0,configurable:!0}),e.prototype.getInputList=function(){var t=[{type:"identity-card",label:this.tr("label.uploadCert"),tips:this.tr("text.uploadTips"),inputs:this.inputs}];this.handheld&&t.push({type:"handheld",label:this.tr("label.uploadHandheldPhoto"),tips:this.tr("text.uploadTips"),inputs:["handheld"]}),this.inputList=t},e.prototype.pictureKey=function(t){return this.type+"_"+t},e.prototype.pictureUrl=function(t){var e=this.pictures[this.pictureKey(t)];return e?e.img_with_token||e.img:""},e.prototype.inputLabelText=function(t){var e="";return e="face"===t?this.tr("label.face"):this.tr("label."+t),"passport"===this.type&&(e=this.tr("label.passport"),"handheld"===t&&(e=this.tr("label.passportHandheld"))),e},e.prototype.openCamera=function(t,e){var i=this;if(this.uploading[this.type]||this.useFileInput||this.applying)return!1;var a=this.type+"-"+t;"handheld"===t?a=this.type+"-handheld":this.isYingShiAuth&&(a="passport"===this.type?"passport":"face"),this.certSelected.type=this.type,this.certSelected.name=this.certName,this.certSelected.openType=a,this.uploading[this.type]=!0,this.$setProps(c.default,{authMethod:this.authMethod,certSelected:this.certSelected}),"passport-info"===a&&(a="passport"),this._uploadChooseImage(function(e){i.resetUploading(),i.upload(e,t)},{type:a},{title:e.label,insertComponent:c.default,close:function(){i.resetUploading()}})},e.prototype.resetUploading=function(){this.uploading[this.type]=!1},e.prototype.upload=function(t,e){var i=this;if(!t)return!1;if("object"===(void 0===t?"undefined":(0,a.default)(t))&&!t.target.value)return!1;this.$toast.showLoading(this.tr("tips.uploading","profile"));var n={type:"idcard_pic"},r=this.getTempData.safetyAppealParams;this.isNotLoginedAppeal&&r&&r.appeal_token&&(n.appeal_token=r.appeal_token),this._uploadRequest(t,n).then(function(t){i.$toast.hide(),i.$set(i.pictures,i.pictureKey(e),t),i.resetUploading()}).catch(function(t){t.failure?i.$toast.show(t.data.meta.msg):i.$toast.show(i.$tr.text.submitError),i.resetUploading()})},e.prototype.certPictureImgError=function(){},n.__decorate([(0,s.Prop)({type:[Object],default:function(){}}),n.__metadata("design:type",Object)],e.prototype,"formData",void 0),n.__decorate([(0,s.Prop)({type:[Object],default:function(){}}),n.__metadata("design:type",Object)],e.prototype,"uploadOptions",void 0),n.__decorate([(0,s.Prop)({type:[Boolean],default:!1}),n.__metadata("design:type",Boolean)],e.prototype,"handheld",void 0),n.__decorate([(0,s.Prop)({type:[String],default:"idcard"}),n.__metadata("design:type",String)],e.prototype,"type",void 0),n.__decorate([(0,s.Prop)({type:[String],default:"idcard"}),n.__metadata("design:type",String)],e.prototype,"authMethod",void 0),n.__decorate([(0,s.Prop)({type:[String],default:"idcard-upload-form"}),n.__metadata("design:type",String)],e.prototype,"form",void 0),n.__decorate([(0,s.Prop)({type:[String],default:"safetyIdCardUploadCallback"}),n.__metadata("design:type",String)],e.prototype,"callbackName",void 0),n.__decorate([(0,s.Prop)({type:[Object],default:function(){}}),n.__metadata("design:type","function"==typeof(i=void 0!==l.IdentityPictures&&l.IdentityPictures)&&i||Object)],e.prototype,"pictureList",void 0),n.__decorate([(0,s.Prop)({type:[Boolean],default:!1}),n.__metadata("design:type",Boolean)],e.prototype,"applying",void 0),n.__decorate([(0,s.Prop)({type:[Boolean],default:!1}),n.__metadata("design:type",Boolean)],e.prototype,"facePicture",void 0),n.__decorate([(0,s.Watch)("pictures"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],e.prototype,"watchPictures",null),n.__decorate([(0,s.Watch)("type"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],e.prototype,"watchTypeProperty",null),n.__decorate([(0,s.Watch)("handheld"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],e.prototype,"watchHandheld",null),n.__decorate([(0,s.Watch)("authMethod"),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[]),n.__metadata("design:returntype",void 0)],e.prototype,"watchAuthMethod",null),n.__decorate([(0,s.Component)({name:"identity-card-upload-input-view",data:function(){return{$trPage:"safety"}},components:{Icon:r.default,MtInput:o.MtInput,InputGroup:o.InputGroup,InputItem:o.InputItem,UploadForm:o.UploadForm,PopupPanel:u.default}})],e)}((0,s.Mixins)(p.default,d.default));e.default=f},neeC:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"View identity-input"},[i("input-group",{staticClass:"real-name",attrs:{"padding-none":!0}},[i("mt-input",{attrs:{type:"text",readonly:t.readonly,disabled:t.readonly,maxlength:t.realNameMaxLength,placeholder:t.realNamePlaceholder,label:t.realNameLabel,clear:""},model:{value:t.realNameText,callback:function(e){t.realNameText=e},expression:"realNameText"}})],1),t._v(" "),t.isVerify?t._e():i("input-group",{staticClass:"cert-type",attrs:{"padding-none":!0}},[i("mt-input",{class:{readonly:t.readonly},attrs:{type:"text",disabled:!t.selectable&&t.readonly,placeholder:"",label:t.tr("label.certType"),readonly:""},on:{click:t.selectCertificate},model:{value:t.certSelected.name,callback:function(e){t.$set(t.certSelected,"name",e)},expression:"certSelected.name"}}),t._v(" "),t.selectable?i("icon",{attrs:{"font-name":"arrow-right"}}):t._e()],1),t._v(" "),i("input-group",{staticClass:"id-number",attrs:{"padding-none":!0}},[i("mt-input",{attrs:{type:"text",readonly:t.readonly,disabled:t.readonly,maxlength:t.idCardMaxLength,placeholder:t.idcardPlaceholder,label:t.idcardLabel,clear:""},model:{value:t.idcardText,callback:function(e){t.idcardText=e},expression:"idcardText"}})],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},ouqR:function(t,e,i){"use strict";i.r(e);var a=i("neeC"),n=i("y31A");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("VVqh");var o=i("KHd+"),s=Object(o.a)(n.default,a.a,a.b,!1,null,null,null);s.options.__file="identity.input.vue",e.default=s.exports},vnfM:function(t,e){},wwhZ:function(t,e){},xF3S:function(t,e,i){t.exports=i.p+"app/img/passport.81b0a8a.png"},"xW/d":function(t,e,i){"use strict";var a=i("KNTo");i.n(a).a},y31A:function(t,e,i){"use strict";i.r(e);var a=i("ecJ+"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a},"z/w/":function(t,e,i){"use strict";i.r(e);var a=i("mnJY"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=n.a}}]);