(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{Dqtu:function(t,e,i){"use strict";e.__esModule=!0;var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i("mrSG")),n=i("YKMj"),s=i("9Ess"),r=i("BXJC"),a=i("iFk+"),l=d(i("lqyy")),c=d(i("K726"));function d(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fetched=!1,e.userInfo=null,e.listLoading=!1,e.loginList=[],e.count=10,e.deviceId=null,e.loadEnd=!0,e.isNowKey=0,e}return o.__extends(e,t),e.prototype.beforeRouteEnter=function(t,e,i){i(function(t){t.readPositions(e)})},e.prototype.created=function(){this.initData()},Object.defineProperty(e.prototype,"headerTips",{get:function(){return this.tr("tips.login").replace(/{text}/,' <span class="link">'+this.tr("button.password")+"</span>")},enumerable:!0,configurable:!0}),e.prototype.initData=function(){var t=this,e=t.getTempData,i=e.loginLogList;if(t.$toast.showLoading(t.$tr.text.loading),t.getUserInfo(),i&&i.length>0)return t.loginList=i,t.loadEnd=t.loginList.length%t.count>0,t.isNowKey=e.loginLogNowKey,t.deviceId=e.deviceId,t.fetched=!0,t.$toast.hide(),!1;t.getLoginList(function(e){for(var i=0,o=e.data.length;i<o;i++)if(e.data[i].device_id===t.deviceId)return t.isNowKey=i,!1})},e.prototype.readPositions=function(t){var e=this.getTempData,i=e.loginLogList;if("AccountLoginLogDetail"===t.name&&i&&i.length>0){var o=this.$refs.pageView,n=e.loginLogListScrollTop;o&&(o.$el.scrollTo?o.$el.scrollTo(0,n):o.$el.scrollTop=n)}},e.prototype.titleFilter=function(t){return t.device_name||t.client_model||t.os_version},e.prototype.getUserInfo=function(){var t=this,e=t.$store.state;if(e.userInfo)return t.userInfo=e.userInfo,!1;t.$api.user.info().then(function(e){t.userInfo=e.data.response}).catch(function(e){e.failure?t.$toast.show(e.data.meta.msg):t.$toast.show(t.$tr.text.submitError)})},e.prototype.getLoginList=function(t){var e=this;if(e.listLoading)return!1;e.listLoading=!0;var i=e.loginList.length;e.$http.get(e.$api.$paths.loginHistory,{max_id:i?e.loginList[i-1].id:0,count:e.count}).then(function(i){var o=i.data.response,n=o.data;if(n.length){if(e.loginList.length>0)for(var s=0,r=n.length;s<r;s++)e.loginList.push(n[s]);else e.loginList=n;e.setTempData({loginLogList:e.loginList,deviceId:o.device_id})}e.deviceId=o.device_id,e.listLoading=!1,e.loadEnd=n.length<e.count,"function"==typeof t&&t(o),e.fetched=!0,e.$toast.hide()}).catch(function(t){e.listLoading=!1,e.$toast.hide(),t.failure?e.$toast.show(t.data.meta.msg):e.$toast.show(e.$tr.text.submitError)})},e.prototype.goToDetail=function(t,e){t.isMe=this.deviceId===t.device_id,t.isNow=this.deviceId===t.device_id&&e===this.isNowKey,this.replaceTempData({loginLogDetail:t,loginLogListScrollTop:this.$refs.pageView.$el.scrollTop||0,loginLogNowKey:this.isNowKey}),this.$router.push({path:t.id,append:!0})},e.prototype.changePwd=function(t){/link/.test(t.target.className)&&this._linkToModifyPassword(this.userInfo.has_password)},o.__decorate([(0,n.Component)({components:{PageTitle:c.default,Page:a.Page,List:r.List,ListItem:r.ListItem},mixins:[l.default],filters:{descriptionFilter:function(t){return(0,s.formatDate)(t.created_at)+' <span class="interval">'+t.client_name+"</span>"}},data:function(){return{$trPage:"loginRecord"}}})],e)}(n.Vue);e.default=u},MuNi:function(t,e,i){"use strict";i.r(e);var o=i("U03d"),n=i("ixTc");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("xcoA");var r=i("KHd+"),a=Object(r.a)(n.default,o.a,o.b,!1,null,null,null);a.options.__file="login.log.vue",e.default=a.exports},U03d:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page",{staticClass:"page-login-logs",attrs:{"bg-color":!0}},[i("title-bar"),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("page-view",{directives:[{name:"show",rawName:"v-show",value:t.fetched,expression:"fetched"}],ref:"pageView"},[i("page-title",{attrs:{title:t.tr("title"),"bg-white":"",padding:""}}),t._v(" "),t.loginList.length?i("div",{staticClass:"Tips interval",domProps:{innerHTML:t._s(t.headerTips)},on:{click:t.changePwd}}):i("div",{staticClass:"Tips text-center",domProps:{textContent:t._s(t.tr("text.emptyRecord","loginRecordDetail"))}}),t._v(" "),i("list",t._l(t.loginList,function(e,o){return i("list-item",{key:o,class:{danger:1==e.status},attrs:{title:t.titleFilter(e),description:t._f("descriptionFilter")(e),border:"bottom",arrow:"true"},on:{click:function(i){t.goToDetail(e,o)}}},[e.device_id===t.deviceId?i("span",{staticClass:"offside-is-me",attrs:{slot:"offside"},domProps:{textContent:t._s(t.tr("text.isMe","credibilityDevice"))},slot:"offside"}):t._e()])})),t._v(" "),!t.loadEnd&&t.loginList.length?i("div",{staticClass:"Tips text-center"},[i("span",{staticClass:"primary",domProps:{textContent:t._s(t.tr("text.loadMore"))},on:{click:t.getLoginList}})]):t._e()],1)],1)],1)},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},VXi1:function(t,e){},ixTc:function(t,e,i){"use strict";i.r(e);var o=i("Dqtu"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);e.default=n.a},xcoA:function(t,e,i){"use strict";var o=i("VXi1");i.n(o).a}}]);