(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"0Sj7":function(t,e){},VVqh:function(t,e,a){"use strict";var r=a("wwhZ");a.n(r).a},"ecJ+":function(t,e,a){"use strict";e.__esModule=!0;var r,i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a("mrSG")),n=(r=a("PzH0"))&&r.__esModule?r:{default:r},o=a("X8Hg"),d=a("YKMj"),c=a("9Ess"),p=a("S7WH"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.realNameText="",e.idcardText="",e.certSelected={name:"",type:"idcard",openType:"idcard-front"},e}return i.__extends(e,t),Object.defineProperty(e.prototype,"isVerify",{get:function(){return"verify"===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedIdcard",{get:function(){return"idcard"===this.certSelected.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelectedPassport",{get:function(){return"passport"===this.certSelected.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realNameMaxLength",{get:function(){return this.isSelectedPassport||this.isVerify?50:20},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idCardMaxLength",{get:function(){return this.isSelectedPassport?17:18},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"certName",{get:function(){return(0,c.tr)("idcard"===this.type?"text.chinaIdcard":"text.passport","safety")},enumerable:!0,configurable:!0}),e.prototype.created=function(){this.type&&(this.certSelected.type=this.type),this.certSelected.name||(this.certSelected.name=this.certName),this.realName&&(this.realNameText=this.realName),this.idcard&&(this.idcardText=this.idcard)},e.prototype.watchType=function(){this.certSelected.type=this.type,this.certSelected.name=this.certName},e.prototype.watchEncodeProperty=function(){this.encode&&(this.realNameText=(0,c.encodeRealName)(this.realNameText),this.idcardText=(0,c.encodeIdcardNumber)(this.idcardText))},e.prototype.watchRealNameInput=function(){this.$emit("input","realName",this.realNameText)},e.prototype.watchIdCardInput=function(){this.$emit("input","idcard",this.idcardText)},e.prototype.watchSelectedType=function(){this.$emit("change-type",this.certSelected.type)},e.prototype.selectCertificate=function(){if(!this.selectable)return!1;var t=this,e=this.certSelected.type,a=this.safetyIdentityInitResult;t.$actionSheet.open({title:(0,c.tr)("label.certType","safety"),selected:e,select:function(e){var r=e.id;a&&a[r]?(t.realNameText=a[r].realname||"",t.idcardText=a[r].id_number||""):(t.realNameText="",t.idcardText=""),t.certSelected.type=r,t.certSelected.name=e.text,this.close()},actions:[{id:"idcard",text:(0,c.tr)("text.chinaIdcard","safety")},{id:"passport",text:(0,c.tr)("text.passport","safety")}]})},i.__decorate([(0,p.State)("safetyIdentityInitResult"),i.__metadata("design:type",Object)],e.prototype,"safetyIdentityInitResult",void 0),i.__decorate([(0,d.Prop)({type:[String],default:"idcard"}),i.__metadata("design:type",String)],e.prototype,"type",void 0),i.__decorate([(0,d.Prop)({type:[String],default:""}),i.__metadata("design:type",String)],e.prototype,"realName",void 0),i.__decorate([(0,d.Prop)({type:[String],default:""}),i.__metadata("design:type",String)],e.prototype,"realNameLabel",void 0),i.__decorate([(0,d.Prop)({type:[String],default:""}),i.__metadata("design:type",String)],e.prototype,"idcard",void 0),i.__decorate([(0,d.Prop)({type:[String],default:""}),i.__metadata("design:type",String)],e.prototype,"idcardLabel",void 0),i.__decorate([(0,d.Prop)({type:[String],default:""}),i.__metadata("design:type",String)],e.prototype,"realNamePlaceholder",void 0),i.__decorate([(0,d.Prop)({type:[String],default:""}),i.__metadata("design:type",String)],e.prototype,"idcardPlaceholder",void 0),i.__decorate([(0,d.Prop)({type:[String,Boolean],default:!1}),i.__metadata("design:type",Object)],e.prototype,"readonly",void 0),i.__decorate([(0,d.Prop)(Boolean),i.__metadata("design:type",Boolean)],e.prototype,"onlyPassport",void 0),i.__decorate([(0,d.Prop)({type:[Boolean],default:!0}),i.__metadata("design:type",Boolean)],e.prototype,"selectable",void 0),i.__decorate([(0,d.Prop)({type:[Boolean],default:!1}),i.__metadata("design:type",Boolean)],e.prototype,"encode",void 0),i.__decorate([(0,d.Watch)("type"),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[]),i.__metadata("design:returntype",void 0)],e.prototype,"watchType",null),i.__decorate([(0,d.Watch)("encode"),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[]),i.__metadata("design:returntype",void 0)],e.prototype,"watchEncodeProperty",null),i.__decorate([(0,d.Watch)("realNameText"),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[]),i.__metadata("design:returntype",void 0)],e.prototype,"watchRealNameInput",null),i.__decorate([(0,d.Watch)("idcardText"),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[]),i.__metadata("design:returntype",void 0)],e.prototype,"watchIdCardInput",null),i.__decorate([(0,d.Watch)("certSelected.type"),i.__metadata("design:type",Function),i.__metadata("design:paramtypes",[]),i.__metadata("design:returntype",void 0)],e.prototype,"watchSelectedType",null),i.__decorate([(0,d.Component)({name:"identity-input-view",data:function(){return{$trPage:"safety"}},components:{Icon:n.default,MtInput:o.MtInput,InputGroup:o.InputGroup}})],e)}(d.Vue);e.default=s},neeC:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"View identity-input"},[a("input-group",{staticClass:"real-name",attrs:{"padding-none":!0}},[a("mt-input",{attrs:{type:"text",readonly:t.readonly,disabled:t.readonly,maxlength:t.realNameMaxLength,placeholder:t.realNamePlaceholder,label:t.realNameLabel,clear:""},model:{value:t.realNameText,callback:function(e){t.realNameText=e},expression:"realNameText"}})],1),t._v(" "),t.isVerify?t._e():a("input-group",{staticClass:"cert-type",attrs:{"padding-none":!0}},[a("mt-input",{class:{readonly:t.readonly},attrs:{type:"text",disabled:!t.selectable&&t.readonly,placeholder:"",label:t.tr("label.certType"),readonly:""},on:{click:t.selectCertificate},model:{value:t.certSelected.name,callback:function(e){t.$set(t.certSelected,"name",e)},expression:"certSelected.name"}}),t._v(" "),t.selectable?a("icon",{attrs:{"font-name":"arrow-right"}}):t._e()],1),t._v(" "),a("input-group",{staticClass:"id-number",attrs:{"padding-none":!0}},[a("mt-input",{attrs:{type:"text",readonly:t.readonly,disabled:t.readonly,maxlength:t.idCardMaxLength,placeholder:t.idcardPlaceholder,label:t.idcardLabel,clear:""},model:{value:t.idcardText,callback:function(e){t.idcardText=e},expression:"idcardText"}})],1)],1)},i=[];a.d(e,"a",function(){return r}),a.d(e,"b",function(){return i})},ogsl:function(t,e,a){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a("mrSG"));a("0Sj7");var i=a("YKMj"),n=l(a("J+9/")),o=l(a("lqyy")),d=l(a("ouqR")),c=a("lzrX"),p=a("rRPG"),s=a("AFph");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.realName="",e.idcard="",e.fetched=!1,e.submitting=!1,e}return r.__extends(e,t),e.prototype.beforeRouteEnter=function(t,e,a){a(function(t){t.start()})},e.prototype.beforeRouteUpdate=function(t,e,a){a(),this.start()},Object.defineProperty(e.prototype,"buttonDisabled",{get:function(){var t=!1;return this.realName.trim()&&this.idcard.trim()||(t=!0),this.idcard.length<5&&(t=!0),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"submitButtonText",{get:function(){var t=this.$tr.text.submit;return this.submitting&&(t=this.$tr.text.submitting),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNotLoginedAppeal",{get:function(){return"not_logined_appeal"===this.$route.query.from},enumerable:!0,configurable:!0}),e.prototype.start=function(){return this.isNotLoginedAppeal&&!this.getTempData.safetyAppealParams?(this.$router.back(),!1):this._safetyAppeal?void 0:(this.$router.replace(c.ROUTE_ACCOUNT),!1)},e.prototype.inputChange=function(t,e){"realName"===t?this.realName=e.trim():"idcard"===t&&(this.idcard=e.trim())},e.prototype.submit=function(){var t=this,e=this;if(this.idcard=this.idcard.trim(),this.realName=this.realName.trim(),this.submitting)return!1;if(!this.realName)return this.$toast.show(this.tr("placeholder.realName")),!1;if(!/^[a-zA-Z0-9]{5,18}$/.test(this.idcard))return this.$toast.show(this.tr("tips.idcardError2")),!1;this.submitting=!0;var a=this.isNotLoginedAppeal?this.getTempData.safetyAppealParams:this._safetyAppeal,r={type:"apply",realname:this.realName,id_number:this.idcard,appeal_token:a?a.appeal_token:""};this.$api.safety.checkIdentity(r).then(function(e){return t.submitBtnReset(),t.isNotLoginedAppeal?(t.$router.push(c.ROUTE_SAFETY_SET_ACCOUNT),!1):t.getTempData.isClientDispatch&&"verify"===t.getTempData.clientDispatchAction?(t._safetyVerifySuccessNotice(s.SAFETY_VERIFY_OP_TYPE_NAME_IDENTITY),t.setTempData({isClientDispatch:!1,clientDispatchAction:""}),!1):(t._safetyActionCodeRedirect(a.op_type,{checkIdentity:!0}),t._safetyActionCode!==s.SAFETY_OP_TYPE_PASSWORD_MODIFY&&t.setSafetyAppeal(null),void t.setTempData({isSafetyDispatch:!1}))}).catch(function(a){if(t.submitBtnReset(),a.failure){var r=a.data,i=r.meta.msg,n=r.meta.code;if(26058===n||26059===n){var o=[];t.$isWeb||o.push({type:"primary",text:t.$tr.text.contactService,closed:function(){e.contactService()}}),o.push({text:t.tr("button.revalidation")}),t.$dialog.confirm({title:t.tr("text.verifyFailed"),content:i,buttons:o})}else t.$toast.show(i);return!1}t.$toast.show(t.$tr.text.submitError)})},e.prototype.submitBtnReset=function(){this.submitting=!1},e.prototype.contactService=function(){this.$dialog.confirm({title:this.$tr.text.contactService,content:this.tr("text.verifyIdFailedToContactService"),buttons:[{type:"primary",text:'<a href="'+p.SERVICE_TEL+'">'+this.$tr.text.callingTel+"</a>"},{text:this.$tr.text.cancel}]})},r.__decorate([(0,i.Component)({name:"page-verify-identity",data:function(){return{$trPage:"safety"}},components:{MtButton:n.default,IdentityInputView:d.default},template:'<page class="safety-verify-identity">\n                    <title-bar/>\n                    <page-view padding>\n                        <h3 class="title" v-text="tr(\'title\')"></h3>\n                        <p class="text" v-text="tr(\'text.verifyIdentityHeaderTips\')">\n                            \x3c!--验证身份信息，请填写你之前预留的身份信息--\x3e\n                        </p>\n                        <identity-input-view type="verify"\n                                             @input="inputChange"\n                                             :real-name-placeholder="tr(\'placeholder.realName\')"\n                                             :idcard-placeholder="tr(\'placeholder.idcard2\')">\n                        </identity-input-view>\n                        <mt-button :disabled="buttonDisabled" @click="submit" type="primary" v-text="submitButtonText"></mt-button>\n                        <p class="primary float-right contact-service"\n                           v-text="$tr.text.contactService"\n                           @click="contactService">\n                        </p>\n                    </page-view>\n                </page>'})],e)}((0,i.Mixins)(o.default));e.default=u},ouqR:function(t,e,a){"use strict";a.r(e);var r=a("neeC"),i=a("y31A");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("VVqh");var o=a("KHd+"),d=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);d.options.__file="identity.input.vue",e.default=d.exports},wwhZ:function(t,e){},y31A:function(t,e,a){"use strict";a.r(e);var r=a("ecJ+"),i=a.n(r);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);e.default=i.a}}]);