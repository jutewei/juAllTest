(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"10lS":function(t,e,n){"use strict";var i=n("EYl2");n.n(i).a},BpKI:function(t,e,n){"use strict";e.__esModule=!0;var i,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("mrSG")),r=(i=n("MgzW"))&&i.__esModule?i:{default:i},s=n("kWpp"),a=function(){function t(t,e,n,i){void 0===n&&(n={});var s=this;this.time=0,this.type="phone",this.captcha="",this.sending=!1,this.countDownText="",this.requestOptions={onAccountStatusAbnormal:function(){var t=s.$vm;t._safetyCheckApplyRequest({op_type:13}).then(function(e){t.setTempData({safetyMessageAppeal:e}),t.$router.push({name:"AppealStart",params:o.__assign({},s.params,{account_status_abnormal:!0})})}).catch(function(e){if(e.failure){var n=e.data||{};t.$toast.show(n.meta.msg)}else t.$toast.show(t.$tr.text.submitError)})}},this.params={},this.type=e,this.$vm=t,this.params=(0,r.default)(this.params,n),this.requestOptions=(0,r.default)(this.requestOptions,i),this.clear()}return Object.defineProperty(t.prototype,"isPhone",{get:function(){return"phone"===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmail",{get:function(){return"email"===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lang",{get:function(){var t=this.$vm;return t.$tr?t.$tr.text:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultCountDownText",{get:function(){var t=this.$vm;return t?t.tr("button.send2","register"):""},enumerable:!0,configurable:!0}),t.prototype.clear=function(){return this.countDown(0),this.countDownText=this.defaultCountDownText,this.countDownEventEmit(),this},t.prototype.changeParams=function(t){this.params=(0,r.default)(this.params,t)},t.prototype.countDown=function(t,e){var n=this;return void 0===t&&(t=59),void 0===e&&(e=function(){}),e=e.bind(this),clearTimeout(this.countDownTimer),t>0?(this.sending=!0,this.countDownText=t+"s",this.countDownTimer=setTimeout(function(){n.countDown(t-1,e)},1e3)):(this.sending=!1,this.countDownText=this.lang.resend1),this.time=t,e(t,this.countDownText),this.countDownEventEmit(),this},t.prototype.countDownEventEmit=function(){this.$vm&&this.$vm.$emit("count-down",this.time,this.countDownText)},t.prototype.setCountDownText=function(t){t&&(this.countDownText=t)},t.prototype.resend=function(){this.sending=!1,this.send()},t.prototype.send=function(t){var e=this,n=this,i=this.$vm;if(this.sending)return!1;t&&(this.params.captcha=this.captcha),this.sending=!0;var o=i.$toast,r=this.isPhone?"send":"sendEmail";i.$api.verifyCode[r](this.params,this.requestOptions).then(function(){e.countDown(59),t&&t.close(),"function"==typeof i.sendSuccess&&i.sendSuccess()}).catch(function(r){e.countDown(0);var a=function(){"function"==typeof i.sendFailure&&i.sendFailure(r)};if(r.data&&r.data.meta){var c=r.data.meta,p=c.code;return t&&(20171===p||p===s.ERROR_CAPTCHA_WRONGS||p===s.ERROR_PHONE_HAS_BEEN_BOUND||p===s.ERROR_EMAIL_VERIFY_CODE_SEND_LIMITED||p===s.ERROR_EMAIL_NOT_REGISTERED||p===s.ERROR_PHONE_UNREGISTERED?t.close():t.reload()),p===s.ERROR_SHOW_CAPTCHA||p===s.ERROR_NEED_CAPTCHA||p===s.ERROR_CAPTCHA?e.requestOptions&&"function"==typeof e.requestOptions.captchaErrorHandle?(e.requestOptions.captchaErrorHandle(r),!1):(i.$dialog.captcha({title:c.msg.replace("ã€‚",""),placeholder:i.tr("placeholder.captcha","password"),countDownText:i.tr("texts.refreshCaptcha","binding"),reloadText:i.tr("texts.refreshCaptcha","binding"),buttons:[{type:"primary",text:e.lang.enter,close:!1,click:function(t){if(void 0!==t.captcha&&!t.captcha.trim())return i.$toast.show(i.tr("placeholder.captcha","password")),!1;n.captcha=t.captcha,n.sending=!1,n.send(t)}},{type:"default",text:e.lang.cancel}]}),a(),!1):(o.show(c.msg),"reset_password"!==e.params.type.trim()||e.requestOptions.notBack||c.code!==s.ERROR_EMAIL_NOT_REGISTERED&&c.code!==s.ERROR_PHONE_UNREGISTERED||i.$router.go(-1),e.clear(),a(),!1)}o.show(i.tr("tips.ajaxError","binding")),t&&t.close(),"function"==typeof i.sendError&&i.sendError(r)})},t.prototype.setBackingDispatchHandler=function(t,e){var n=this;void 0===t&&(t=null),void 0===e&&(e=!1);var i=this.$vm;window.DispatchHandlers.backing=function(){if(!n.sending)return i.$accountCommand("Backing"),!1;var o=i.$tr.text;i.$accountCommand("BackingStop"),i.$dialog.confirm({title:i.$tr.text.attention,content:e?o.sentBackingConfirm2:o.sentBackingConfirm,buttons:[{type:"primary",text:o.wait},{text:o.back,click:function(){t&&"function"==typeof t?t(i.$dialog):i.$accountCommand("Backing"),window.DispatchHandlers.backing=null,i.$dialog.close()}}]})}},t}();e.default=a},"D+6T":function(t,e,n){"use strict";e.__esModule=!0;var i=u(n("EJiy")),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("mrSG")),r=u(n("Zdk5")),s=n("RQxJ"),a=n("YKMj"),c=u(n("MgzW")),p=u(n("BpKI"));function u(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFocus=!1,e.code="",e.codeList=[0,1,2,3,4,5],e.countDownText="",e.maxLength=6,e}var n;return o.__extends(e,t),Object.defineProperty(e.prototype,"checkVerifyInput",{get:function(){return"c-v-t"+(0-new Date)},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){var t=this;this.$on("count-down",function(e,n){t.countDownText=n}),this.$emit("init",this)},e.prototype.beforeDestroy=function(){return this.sender&&this.sender.clear(),!1},e.prototype.init=function(t,e,n){void 0===t&&(t=!1);var o={type:"reset_password"};"phone"===this.type?(o.phone=this.phone,o.phone_cc=this.globalRoaming):o.email=this.email,"object"===(void 0===e?"undefined":(0,i.default)(e))&&(o=(0,c.default)(o,e));var r=(0,c.default)(this.sendRequestOptions||{},n);this.sender=new p.default(this,this.type,o,r),t&&this.send()},e.prototype.sendSuccess=function(){this.code="",this.$emit("send-success")},e.prototype.sendFailure=function(){this.code=""},e.prototype.verifyInput=function(){this.code.length>6&&(this.code=this.code.substr(0,6)),this.$emit("input",this.code)},e.prototype.changeStatus=function(t){this.isFocus=t},e.prototype.send=function(){this.sender.send()},e.prototype.watchCode=function(){this.code.length>=this.maxLength&&this.$emit("submit",this.code)},e.prototype.changeValue=function(t){this.code!==t&&(this.code=t)},o.__decorate([(0,a.Prop)([String]),o.__metadata("design:type",String)],e.prototype,"title",void 0),o.__decorate([(0,a.Prop)([String]),o.__metadata("design:type",String)],e.prototype,"text",void 0),o.__decorate([(0,a.Prop)([String,Number]),o.__metadata("design:type",Object)],e.prototype,"phone",void 0),o.__decorate([(0,a.Prop)([String,Number]),o.__metadata("design:type",Object)],e.prototype,"globalRoaming",void 0),o.__decorate([(0,a.Prop)([String]),o.__metadata("design:type",String)],e.prototype,"email",void 0),o.__decorate([(0,a.Prop)([String]),o.__metadata("design:type",String)],e.prototype,"type",void 0),o.__decorate([(0,a.Prop)([String]),o.__metadata("design:type",String)],e.prototype,"value",void 0),o.__decorate([(0,a.Prop)({type:[Boolean],default:!0}),o.__metadata("design:type",Boolean)],e.prototype,"showBottomTips",void 0),o.__decorate([(0,a.Prop)({default:function(){}}),o.__metadata("design:type","function"==typeof(n=void 0!==s.HttpOptions&&s.HttpOptions)&&n||Object)],e.prototype,"sendRequestOptions",void 0),o.__decorate([(0,a.Watch)("code"),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[]),o.__metadata("design:returntype",void 0)],e.prototype,"watchCode",null),o.__decorate([(0,a.Watch)("value",{immediate:!0}),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",[Object]),o.__metadata("design:returntype",void 0)],e.prototype,"changeValue",null),o.__decorate([r.default],e)}(a.Vue);e.default=h},EYl2:function(t,e){},RQxJ:function(t,e,n){},UErx:function(t,e,n){"use strict";n.r(e);var i=n("D+6T"),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e.default=o.a},jsPX:function(t,e,n){"use strict";n.r(e);var i=n("kM/c"),o=n("UErx");for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);n("10lS");var s=n("KHd+"),a=Object(s.a)(o.default,i.a,i.b,!1,null,null,null);a.options.__file="check.verify.code.vue",e.default=a.exports},"kM/c":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"View phone-verify-form"},[t.title?n("h3",{staticClass:"phone-verify-title",domProps:{textContent:t._s(t.title)}}):t._e(),t._v(" "),n("div",{staticClass:"phone-verify-tips"},[n("span",{staticClass:"text"},[t._t("message")],2),t._v(" "),n("span",{staticClass:"primary float-right",domProps:{textContent:t._s(t.countDownText)},on:{click:function(e){t.send(!1)}}})]),t._v(" "),n("label",{staticClass:"phone-verify-input",attrs:{for:t.checkVerifyInput}},t._l(t.codeList,function(e,i){return n("span",{key:i,staticClass:"item",class:{curr:t.code.length===i,enter:t.isFocus},domProps:{textContent:t._s(t.code[e])}})})),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"phone-verify-input-hidden",attrs:{id:t.checkVerifyInput,type:"tel",maxlength:t.maxLength},domProps:{value:t.code},on:{keyup:t.verifyInput,focus:function(e){t.changeStatus(!0)},blur:function(e){t.changeStatus(!1)},input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),t.showBottomTips?n("div",{staticClass:"phone-verify-tips text-right clearfix"},[t._t("tips",["phone"===t.type?n("span",{staticClass:"text",domProps:{textContent:t._s(t.tr("text.newPhone","safety"))}}):t._e(),t._v(" "),"phone"===t.type?n("span",{staticClass:"primary other",domProps:{textContent:t._s(t.tr("text.newPhoneLink","safety"))},on:{click:function(e){t.$emit("other-phone")}}}):t._e(),t._v(" "),"email"===t.type?n("span",{staticClass:"primary float-right",domProps:{textContent:t._s(t.tr("tips.didNotReceive","email"))},on:{click:function(e){t.$emit("email-did-not-receive")}}}):t._e()])],2):t._e()])},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},"q+Iq":function(t,e,n){"use strict";e.__esModule=!0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n("mrSG")),o=n("YKMj"),r=d(n("jsPX")),s=d(n("lqyy")),a=n("9Ess"),c=n("yI22"),p=n("kWpp"),u=n("lzrX"),h=n("AFph");function d(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.code="",e.submitting=!1,e}return i.__extends(e,t),e.prototype.beforeRouteEnter=function(t,e,n){n()},e.prototype.beforeRouteUpdate=function(t,e,n){n()},Object.defineProperty(e.prototype,"title",{get:function(){return this.tr("titleOfVerify","register")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phone",{get:function(){return this.$route.params.phone||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phone_cc",{get:function(){return this.$route.params.phone_cc||"86"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){var t=this.tr("tips.idAuthPhoneSent","binding");return t.replace("{phone}","+"+this.phone_cc+" "+this.phone)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appealToken",{get:function(){var t=this._safetyAppeal;return t?t.appeal_token:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNeedHandheld",{get:function(){return"1"===this.$route.query.handheld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isYingShiAuthVerifyPhone",{get:function(){return"yingshi"===this.$route.query.auth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isYingShiAuthNeedHandheldVerifyPhone",{get:function(){return this.isYingShiAuthVerifyPhone&&this.isNeedHandheld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isChangePhoneFromIdAuth",{get:function(){return this.$route.path===u.ROUTE_CHANGE_PHONE_FROM_ID_AUTH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sendViewInitParams",{get:function(){return{type:c.SEND_TYPE_FOR_IDCARD_CHECK_PHONE}},enumerable:!0,configurable:!0}),e.prototype.created=function(){this.start()},e.prototype.start=function(){if(!this._safetyAppeal||!this.phone||!this.phone_cc)return this.$router.replace(u.ROUTE_ACCOUNT),!1},e.prototype.sendViewInit=function(t){this.view=t,t.init(!1,this.sendViewInitParams),t.sender.countDown(),t.sender.setBackingDispatchHandler()},e.prototype.send=function(){this.view.sender.send()},e.prototype.submitButtonReset=function(){this.submitting=!1,this.$toast.hide()},e.prototype.submit=function(t){var e=this;if(this.submitting)return!1;this.code=t,this.submitting=!0,this.$toast.showLoading();var n={appeal_token:this.appealToken,phone_cc:this.phone_cc,phone:this.phone,verify_code:this.code};this.$api.safety.identityAuthSubmit(n).then(function(t){e.submitButtonReset(),e.submitSuccessNext(t)}).catch(function(t){if(t.failure){var n=t.data.meta;n.code===p.ERROR_VERIFY_CODE_LIMITED&&e.view.sender.clear(),e.submitButtonReset(),e.$toast.show(n.msg)}else e.$toast.show(e.$tr.text.submitError)})},e.prototype.submitSuccessNext=function(t){var e=t.data.response;if(this.setTempData({safetyVerifyOpTypeName:h.SAFETY_VERIFY_OP_TYPE_NAME_IDENTITY}),(0,a.isEmptyObject)(e))return this.onIdentityAuthOCRVerifySuccess(),!1;e.audit_info=e,this.setSafetyAppeal(e);var n=u.ROUTE_SAFETY_ID_AUTH_APPLYING,i=u.ROUTE_CHANGE_PHONE_APPLYING,o=this._safetyActionCode;o&&(o===h.SAFETY_OP_TYPE_PHONE_CHANGE?n=i:o!==h.SAFETY_OP_TYPE_IDENTITY_AUTH&&(n=u.ROUTE_SAFETY_ID_AUTH_FROM_APPEAL)),this.isChangePhoneFromIdAuth&&(n=i),n===i&&this.setTempData({phone:this.phone,phone_cc:this.phone_cc}),this.$router.replace(n)},e.prototype.onIdentityAuthOCRVerifySuccess=function(){this._safetyActionCode!==h.SAFETY_OP_TYPE_PASSWORD_MODIFY&&this.setSafetyAppeal(null);var t=this._safetyActionCode;return this.setTempData({safetyVerifyOpTypeName:h.SAFETY_VERIFY_OP_TYPE_NAME_IDENTITY_OCR}),this.isYingShiAuthVerifyPhone?(this.$router.replace(u.ROUTE_SAFETY_YINGSHI_AUTHENTICATED),!1):t===h.SAFETY_OP_TYPE_REAL_NAME_AUTH?(this.$router.replace(u.ROUTE_SAFETY_REAL_NAME_AUTHENTICATED),!1):void this.showIdentityAuthOCRVerifySuccessDialog()},e.prototype.showIdentityAuthOCRVerifySuccessDialog=function(){var t=this,e=this._safetyActionCode;this.$dialog.confirm({title:this.tr("text.verifySuccess","safety"),content:this.tr("tips.verifySuccess","safety"),buttons:[{type:"primary",text:this.$tr.text.enter,click:function(){if((t._temp.isSafetyDispatch||t._temp.isClientDispatch)&&(t._safetyVerifySuccessNotice(t._temp.safetyVerifyOpTypeName),t.setTempData({isClientDispatch:!1,isSafetyDispatch:!1})),t.$dialog.close(),e===h.SAFETY_OP_TYPE_PHONE_BINDING)return t.$router.replace(u.ROUTE_ACCOUNT),!1;t._safetyActionCodeRedirect(e,{identityAutoValidated:!0})}}]})},i.__decorate([(0,o.Component)({data:function(){return{$trPage:"safety"}},components:{CheckVerifyCodeView:r.default},template:'<page class="safety-identity-auth-phone-verify">\n                    <title-bar/>\n                    <page-view padding>\n                        <check-verify-code-view\n                                type="phone"\n                                :title="title"\n                                :global-roaming="phone_cc"\n                                :phone="phone"\n                                :show-bottom-tips="false"\n                                v-model="code"\n                                @init="sendViewInit"\n                                @submit="submit">\n                            <span slot="message" v-text="message"></span>\n                        </check-verify-code-view>\n                    </page-view>\n                </page>'})],e)}((0,o.Mixins)(s.default));e.default=_},yI22:function(t,e,n){"use strict";e.__esModule=!0,e.SEND_TYPE_FOR_IDCARD_CHECK_PHONE="idcard_check_phone",e.SEND_TYPE_FOR_SAFETY_CHECK_NEW_PHONE="safety_check_new_phone",e.SEND_TYPE_FOR_SAFETY_CHECK_OLD_PHONE="safety_check_old_phone",e.SEND_TYPE_FOR_SAFETY_CHECK_OLD_EMAIL="safety_check_old_email",e.SEND_TYPE_FOR_VERIFY_EMAIL="verify_email",e.SEND_TYPE_FOR_RESET_PASSWORD="reset_password",e.SEND_TYPE_FOR_BIND_PHONE="bind_phone",e.SEND_TYPE_FOR_REGISTER="register",e.SEND_TYPE_FOR_LOGIN="login",e.SEND_TYPE_FOR_LOGIN_PROTECTED="login_protected"}}]);